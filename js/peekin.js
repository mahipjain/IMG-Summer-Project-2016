!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(){var a={},b=document.doctype;a.doctype=b?(0,i.utf8_to_b64)("<!DOCTYPE "+b.name+(b.publicId?' PUBLIC "'+b.publicId+'"':"")+(!b.publicId&&b.systemId?" SYSTEM":"")+(b.systemId?' "'+b.systemId+'"':"")+">"):null,a.url=window.location.href,a.w_size={w:window.innerWidth,h:window.innerHeight},a.scroll={doc:{x:k.window_scrollX(),y:k.window_scrollY()},els:[]},a.form_values=[];for(var c=document.getElementsByTagName("*"),d=0;d<c.length;d++)if(c.hasOwnProperty(d)){var e=c[d];if(e.setAttribute("peekin-uid",l++),k.is_scrollable(e)&&a.scroll.els.push({el:k.element_id(e),x:e.scrollTop,y:e.scrollLeft}),"INPUT"===e.nodeName||"SELECT"===e.nodeName||"TEXTAREA"===e.nodeName){var f=e.value;m[k.element_id(e)]=f;var g=!1,h=k.element_parents(e),j=!0,n=!1,o=void 0;try{for(var p,q=h[Symbol.iterator]();!(j=(p=q.next()).done);j=!0){var r=p.value;r.className&&/\bdont_peek\b/.test(r.className)&&(g=!0)}}catch(s){n=!0,o=s}finally{try{!j&&q["return"]&&q["return"]()}finally{if(n)throw o}}if("undefined"!=typeof e.type&&"file"===e.type)continue;("undefined"!=typeof e.type&&("password"===e.type||"hidden"===e.type)||g)&&(f=f.replace(/./g,"*")),f=(e.checked?"1:":"0:")+f,a.form_values.push({el:k.element_id(e),v:f})}}a.html=(0,i.utf8_to_b64)(document.documentElement.outerHTML),a.stylesheets=[];for(var t=0;t<document.styleSheets.length;t++){var u=document.styleSheets[t];if(u.href)a.stylesheets.push(u.href);else if(u.cssRules)for(var v=0;v<u.cssRules.length;v++){var w=u.cssRules[v];w.href&&a.stylesheets.push(w.href)}}return a}function g(){var a=document.getElementsByTagName("base");if(0==a.length){var b=document.createElement("base"),c=document.getElementsByTagName("head")[0],d=c.childNodes[0];b.href=window.location.href,c.insertBefore(b,d)}else{var e=document.createElement("a");e.href=a[0].href,a[0].href=e.href}}var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0});var i=a("../utils"),j=a("../dom"),k=d(j),l=0,m={},n=!1;"undefined"==typeof MutationObserver&&(a("mutationobserver-shim"),n=!0);var o=[],p={page_load:{detect:function(a){a()},encode:function(){return JSON.stringify({page_load:f()})}},dom_change:{detect:function(a){var b=new MutationObserver(a);b.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0,attributeOldValue:!0}),o.push(function(){b.disconnect()}),o.push(function(a){return function(){a.disconnect()}}(b))},encode:function(a){var b=[],c=[],d=function(a,b){var d=null,e=b.previousSibling;if(e)for(;e;){if(1===e.nodeType){d=e;break}e=e.previousSibling}var f=null,g=b.nextSibling;if(g)for(;g;){if(1===g.nodeType){f=g;break}g=g.nextSibling}c.push([a,d?k.element_id(d):null,f?k.element_id(f):null])};a.forEach(function(a){if("childList"==a.type){for(var b=0;b<a.removedNodes.length;b++)if(a.removedNodes.hasOwnProperty(b)){var c=a.removedNodes[b];1===c.nodeType&&d(c,a)}for(var b=0;b<a.addedNodes.length;b++)if(a.addedNodes.hasOwnProperty(b)){var c=a.addedNodes[b];1===c.nodeType&&d(c,a)}}});var e=function o(a){var b=null,d=a;if(d)for(;d;){if(1===d.nodeType){b=d;break}d=d.previousSibling}if(null==b)return null;var e=!0,f=!1,g=void 0;try{for(var h,i=c[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;if(j[0]===a)return o(j[1])}}catch(k){f=!0,g=k}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}return b},f=function p(a){var b=null,d=a;if(d)for(;d;){if(1===d.nodeType){b=d;break}d=d.nextSibling}if(null==b)return null;if(b){var e=!0,f=!1,g=void 0;try{for(var h,i=c[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;if(j[0]===a)return p(j[2])}}catch(k){f=!0,g=k}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}}return b};a.forEach(function(a){var c={el:k.element_id(a.target)};if("attributes"==a.type){if("peekin-"===a.attributeName.substr(0,7))return;c.type="attributes",c.attributes=k.get_attributes(a.target)}else if("childList"==a.type){for(var d=document.querySelectorAll(":not([peekin-uid])"),g=0;g<d.length;g++)if(d.hasOwnProperty(g)){var h=d[g];h.setAttribute("peekin-uid",l++)}if(n)c.type="html",c.html=(0,i.utf8_to_b64)(a.target.outerHTML);else if(a.addedNodes.length>0||a.removedNodes.length>0){c.type="children";var j=e(a.previousSibling);c.before=j;var m=f(a.nextSibling);c.after=m;for(var o="",p=!c.before,q=0;q<a.target.childNodes.length;q++)if(a.target.childNodes.hasOwnProperty(q)){var r=a.target.childNodes[q];if(p){if(r===m)break;1===r.nodeType?o+=r.outerHTML:3===r.nodeType&&(o+=r.textContent)}else r===j&&(p=!0)}c.before=c.before?k.element_id(c.before):null,c.after=c.after?k.element_id(c.after):null,c.html=(0,i.utf8_to_b64)(o)}}else"characterData"==a.type?(c.type="text",c.text=(0,i.utf8_to_b64)(k.get_merged_text_nodes(a.target))):(c.type="html",c.html=(0,i.utf8_to_b64)(a.target.outerHTML));c.el&&b.push(c)});for(var g={},h=0;h<b.length;h++){var j=b[h],m=[j.type,j.el,j.before||"",j.after||""].join(":");g[m]=j}return JSON.stringify({dom_change:(0,i.object_values)(g)})}},mouse_move:{detect:function(a){var b=(0,i.throttle)(a,100);document.addEventListener("mousemove",b),o.push(function(a){return function(){document.removeEventListener("mousemove",a)}}(b))},encode:function(a){var b,c={x:a.clientX,y:a.clientY,el_hover:null};return(b=document.elementFromPoint(a.clientX,a.clientY))&&(c.el_hover=k.element_id(b)),JSON.stringify({mouse_move:c})}},click:{detect:function(a){document.addEventListener("click",a),o.push(function(a){return function(){document.removeEventListener("click",a)}}(a))},encode:function(a){var b={x:a.clientX,y:a.clientY};return JSON.stringify({click:b})}},value_change:{detect:function(a){var b=function(){for(var b=document.querySelectorAll("input,textarea,select"),c=0;c<b.length;c++)if(b.hasOwnProperty(c)){var d=b[c],e=(d.checked?"1:":"0:")+d.value;e!==m[k.element_id(d)]&&a(d),m[k.element_id(d)]=e}},c=setInterval(b,300);o.push(function(a){return function(){clearInterval(a)}}(c))},encode:function(a){if("undefined"!=typeof a.value){var b={el:k.element_id(a)},c=!1,d=k.element_parents(a),e=!0,f=!1,g=void 0;try{for(var h,i=d[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;j.className&&/\bdont_peek\b/.test(j.className)&&(c=!0)}}catch(l){f=!0,g=l}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}if("undefined"==typeof a.type||"password"===a.type||"file"===a.type||"hidden"===a.type||c){if("file"===a.type)return;b.v=a.value.replace(/./g,"*")}else b.v=a.value;return b.v=(a.checked?"1:":"0:")+b.v,JSON.stringify({value_change:b})}}},scroll:{detect:function(a){var b=function(b){var c={},d=b.target===document?"document":k.element_id(b.target);"undefined"==typeof c[d]&&(c[d]=(0,i.throttle)(function(b){a(b)},500)),c[d](b)};document.addEventListener("scroll",b,!0),o.push(function(a){return function(){document.removeEventListener("scroll",a,!0)}}(b))},encode:function(a){var b;return b=a.target===document?{x:k.window_scrollX(),y:k.window_scrollY()}:{el:k.element_id(a.target),x:a.target.scrollTop,y:a.target.scrollLeft},JSON.stringify({scroll:b})}},window_resize:{detect:function(a){var b=(0,i.throttle)(a,1e3);window.addEventListener("resize",b),o.push(function(a){return function(){window.removeEventListener("resize",a)}}(b))},encode:function(a){var b={w:window.innerWidth,h:window.innerHeight};return JSON.stringify({window_resize:b})}},focus:{detect:function(a){document.addEventListener("focusin",a),o.push(function(a){return function(){document.removeEventListener("focusin",a)}}(a))},encode:function(a){return JSON.stringify({focus:{el:k.element_id(a.target)}})}},blur:{detect:function(a){document.addEventListener("focusout",a),o.push(function(a){return function(){document.removeEventListener("focusout",a)}}(a))},encode:function(a){return JSON.stringify({blur:{el:k.element_id(a.target)}})}}},q=function(){function a(b,c){e(this,a),this.initial_state_callback=b,this.event_callback=c}return h(a,[{key:"init",value:function(){g();var a=this;for(var b in p){var c=p[b];c.detect(function(b){return function(c){a.event_callback(b.encode(c))}}(c))}}},{key:"request_initial_state",value:function(){this.initial_state_callback(JSON.stringify(f()))}},{key:"end",value:function(){for(var a=document.querySelectorAll("*"),b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var c=a[b];c.removeAttribute("peekin-uid")}var d=!0,e=!1,f=void 0;try{for(var g,h=o[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value;i()}}catch(j){e=!0,f=j}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}}}]),a}();c["default"]=q},{"../dom":11,"../utils":13,"mutationobserver-shim":64}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0});var h=a("./browser_watcher"),i=d(h),j=a("./remote_control"),k=d(j),l=a("./pointer"),m=d(l),n=a("./integrations"),o=d(n),p=a("../utils"),q=function(){function b(c){var d=arguments.length<=1||void 0===arguments[1]?null:arguments[1],g=arguments.length<=2||void 0===arguments[2]?null:arguments[2],h=arguments.length<=3||void 0===arguments[3]?null:arguments[3],i=arguments.length<=4||void 0===arguments[4]?{}:arguments[4];f(this,b),this.watcher=null,this.watchers_count=0,this.integrations=new o["default"](d),this.peekin_id=d,this.socket=a("socket.io-client")(i.dev?"//localhost:3005/":"//api.peekin.io/",{transports:["websocket"]});var j=this;this.pointer=new m["default"],this.socket.on("connect",function(){j.pointer=j.pointer||new m["default"],j.socket.emit("hello",JSON.stringify({peekin_id:d,first_seen:g,api_key:c,identities:i.identities,url:window.location.href.split("//")[1],version:i.version,integration_id:j.integrations.integration_id})),j.socket.on("you_are",function(a){j.peekin_id=a.split(":")[0],j.enable_notify_idleness(),j.enable_notify_url_change(),j.enable_integrations(),h(a)}),j.socket.on("begin_session",function(){j.begin_session()}),j.socket.on("continue_session",function(){j.begin_session()}),j.socket.on("end_session",function(){j.end_session()}),j.socket.on("show_pointer",function(){j.pointer.show()}),j.socket.on("hide_pointer",function(){j.pointer.hide()}),j.socket.on("move_pointer",function(a){var b;(b=j.pointer).move.apply(b,e(a.split(",")))}),j.socket.on("enable_remote_control",function(){j.remote_control.enable()}),j.socket.on("disable_remote_control",function(){j.remote_control.disable()}),j.socket.on("remote_control_event",function(a){var b=Object.keys(a)[0],c=a[b];j.remote_control.handle_event(b,c)})})}return g(b,[{key:"send_browser_event",value:function(a){this.socket.emit("browser_event",a)}},{key:"send_initial_state",value:function(a){this.socket.emit("initial_state",a)}},{key:"begin_session",value:function(){var a=this;this.watcher||!function(){var b=a;a.watcher=new i["default"](function(a){return b.send_initial_state(a)},function(a){return b.send_browser_event(a)})}(),this.remote_control||(this.remote_control=new k["default"]),0===this.watchers_count?(console.log("Starting peek in session"),window.peekin.hooks&&window.peekin.hooks.session_start&&window.peekin.hooks.session_start(),this.watcher.init()):this.watcher.request_initial_state(),this.watchers_count+=1}},{key:"end_session",value:function(){1===this.watchers_count&&(console.log("Ending peek in session"),this.watcher.end(),this.remote_control.disable(),this.pointer.hide(),window.peekin.hooks&&window.peekin.hooks.session_end&&window.peekin.hooks.session_end()),this.watchers_count-=1}},{key:"enable_notify_idleness",value:function(){var a,b=this,c=!0;setInterval(function(){document.hasFocus()||!c||a||(a=setTimeout(function(){!document.hasFocus()&&c&&(b.socket.emit("idle"),c=!1)},5e3))},1e3);var d=(0,p.throttle)(function(){document.hasFocus()&&(b.socket.emit("active"),c=!0,clearTimeout(a))},2e3);document.addEventListener("click",d),document.addEventListener("mousemove",d),document.addEventListener("scroll",d,!0),document.addEventListener("keyup",d)}},{key:"enable_notify_url_change",value:function(){var a=this,b=window.location.href;setInterval(function(){window.location.href!==b&&(b=window.location.href,a.socket.emit("url_change",b))},1e3)}},{key:"notify_identities",value:function(a){this.socket.emit("identities_change",a)}},{key:"enable_integrations",value:function(){this.integrations.set_peekin_id(this.peekin_id)}}]),b}();c["default"]=q},{"../utils":13,"./browser_watcher":1,"./integrations":4,"./pointer":9,"./remote_control":10,"socket.io-client":70}],3:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d='#peekin___overlay {    display: none;    position: fixed;    z-index: 2147483647;    width: 10000px;    height: 10000px;    top: -5000px;    left: -5000px;    opacity: 0;    pointer-events: none;    transition: opacity 0.3s;    -webkit-transition: opacity 0.3s;    background: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwMDBweCIgaGVpZ2h0PSIxMDAwMHB4IiB2aWV3Qm94PSIwIDAgMTAwMDAgMTAwMDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogIDxnIGlkPSJvdmVybGF5IiBmaWxsLW9wYWNpdHk9IjAuMiIgZmlsbD0iIzAwMDAwMCI+DQogICAgICA8cGF0aCBkPSJNMCwwIEwxMDAwMCwwIEwxMDAwMCwxMDAwMCBMMCwxMDAwMCBMMCwwIEwwLDAgWiBNNTAwMCw1MDU0IEM1MDI5LjgyMzM4LDUwNTQgNTA1NCw1MDI5LjgyMzM4IDUwNTQsNTAwMCBDNTA1NCw0OTcwLjE3NjYyIDUwMjkuODIzMzgsNDk0NiA1MDAwLDQ5NDYgQzQ5NzAuMTc2NjIsNDk0NiA0OTQ2LDQ5NzAuMTc2NjIgNDk0Niw1MDAwIEM0OTQ2LDUwMjkuODIzMzggNDk3MC4xNzY2Miw1MDU0IDUwMDAsNTA1NCBMNTAwMCw1MDU0IFoiIGlkPSJpbm5lci1jaXJjbGUiPjwvcGF0aD4NCiAgPC9nPg0KPC9zdmc+");}#peekin___overlay.peekin___overlay-show{    opacity: 1;    transition: opacity 0.3s, top 0.1s, left 0.1s;    -webkit-transition: opacity 0.3s, top 0.1s, left 0.1s;}',e='#peekin___remote_control_stopper {    display: none;    position: fixed;    height: 100%;    width: 100%;    z-index: 2147483647;    top: 0;    left: 0;    cursor: none;}#peekin___remote_control_stopper.peekin__remote_control_active {    display: block;}#peekin___remote_control_stopper p {    display: block;    position: fixed;    right: 0;    background: #FFC800;    color: black;    font-size: 13px;    font-family: "Lucida Grande", "Tahoma", "Verdana", "Arial", sans-serif;    padding: 5px 10px;    bottom: 0;    margin: 0;    border-radius: 3px 0 0 0;    font-weight: 400;}#peekin___remote_control_cursor {    position: absolute;    width: 6px;    height: 6px;    border-radius: 3px;    background: rgba(0, 0, 0, 0.8);    pointer-events: none;    transition: top 0.1s, left 0.1s;    -webkit-transition: top 0.1s, left 0.1s;}#peekin___remote_control_cursor:after {    background: rgba(0, 0, 0, 0.1);    content: \'\';    position: absolute;    top: 50%;    left: 50%;    margin: -35px 0 0 -35px;    width: 70px;    height: 70px;    border-radius: 50%;    opacity: 0;    pointer-events: none;}#peekin___remote_control_cursor.click:after {    animation: peekin___click_animation 0.3s forwards;}@-webkit-keyframes peekin___click_animation {    0% {    -webkit-transform: scale3d(0.3, 0.3, 1);    -moz-transform: scale3d(0.3, 0.3, 1);    -ms-transform: scale3d(0.3, 0.3, 1);    -o-transform: scale3d(0.3, 0.3, 1);    transform: scale3d(0.3, 0.3, 1);}    25%, 50% {        opacity: 1;}    100% {        opacity: 0;    -webkit-transform: scale3d(1.2, 1.2, 1);    -moz-transform: scale3d(1.2, 1.2, 1);    -ms-transform: scale3d(1.2, 1.2, 1);    -o-transform: scale3d(1.2, 1.2, 1);    transform: scale3d(1.2, 1.2, 1);}}@-moz-keyframes peekin___click_animation {    0% {    -webkit-transform: scale3d(0.3, 0.3, 1);    -moz-transform: scale3d(0.3, 0.3, 1);    -ms-transform: scale3d(0.3, 0.3, 1);    -o-transform: scale3d(0.3, 0.3, 1);    transform: scale3d(0.3, 0.3, 1);}    25%, 50% {        opacity: 1;}    100% {        opacity: 0;    -webkit-transform: scale3d(1.2, 1.2, 1);    -moz-transform: scale3d(1.2, 1.2, 1);    -ms-transform: scale3d(1.2, 1.2, 1);    -o-transform: scale3d(1.2, 1.2, 1);    transform: scale3d(1.2, 1.2, 1);}}@-o-keyframes peekin___click_animation {    0% {    -webkit-transform: scale3d(0.3, 0.3, 1);    -moz-transform: scale3d(0.3, 0.3, 1);    -ms-transform: scale3d(0.3, 0.3, 1);    -o-transform: scale3d(0.3, 0.3, 1);    transform: scale3d(0.3, 0.3, 1);}    25%, 50% {        opacity: 1;}    100% {        opacity: 0;    -webkit-transform: scale3d(1.2, 1.2, 1);    -moz-transform: scale3d(1.2, 1.2, 1);    -ms-transform: scale3d(1.2, 1.2, 1);    -o-transform: scale3d(1.2, 1.2, 1);    transform: scale3d(1.2, 1.2, 1);}}@keyframes peekin___click_animation {    0% {    -webkit-transform: scale3d(0.3, 0.3, 1);    -moz-transform: scale3d(0.3, 0.3, 1);    -ms-transform: scale3d(0.3, 0.3, 1);    -o-transform: scale3d(0.3, 0.3, 1);    transform: scale3d(0.3, 0.3, 1);}    25%, 50% {        opacity: 1;}    100% {        opacity: 0;    -webkit-transform: scale3d(1.2, 1.2, 1);    -moz-transform: scale3d(1.2, 1.2, 1);    -ms-transform: scale3d(1.2, 1.2, 1);    -o-transform: scale3d(1.2, 1.2, 1);    transform: scale3d(1.2, 1.2, 1);}}';c.remote_control_style=e,c.pointer_style=d},{}],4:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0});var g=a("./intercom"),h=d(g),i=a("./olark"),j=d(i),k=a("./livechatinc"),l=d(k),m=a("./zopim"),n=d(m),o=function(){function a(b){e(this,a),this.peekin_id=b,this.integration_id=null,"undefined"!=typeof window.Intercom?(this.integration_id="intercom",this.integration=new h["default"](this)):"undefined"!=typeof window.olark?(this.integration_id="olark",this.integration=new j["default"](this)):"undefined"!=typeof window.__lc?(this.integration_id="livechat",this.integration=new l["default"](this)):"undefined"!=typeof window.$zopim&&(this.integration_id="zopim",this.integration=new n["default"](this))}return f(a,[{key:"set_peekin_id",value:function(a){this.peekin_id=a,this.integration&&this.integration.live()}}]),a}();c["default"]=o},{"./intercom":5,"./livechatinc":6,"./olark":7,"./zopim":8}],5:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(b){d(this,a),this.integrations=b}return e(a,[{key:"live",value:function(){try{window.Intercom("update",{watch_screen:"https://peekin.io/"+this.integrations.peekin_id}),window.intercomSettings.watch_screen="https://peekin.io/"+this.integrations.peekin_id}catch(a){console.log(a)}}}]),a}();c["default"]=f},{}],6:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(b){function c(){if(!window.LC_API||!window.LC_API.set_custom_variables)return setTimeout(c,50);e.function_rewritten=!0;var a=window.LC_API.set_custom_variables;window.LC_API.set_custom_variables=function(c){e.livechat_custom_vars=c,c.push({name:"Watch screen",value:"https://peekin.io/"+b.peekin_id}),a.call(window.LC_API,c)}}d(this,a),this.integrations=b,window.__lc.params=window.__lc.params||[],this.livechat_custom_vars=window.__lc.params,this.function_rewritten=!1;var e=this;setTimeout(c,50)}return e(a,[{key:"live",value:function(){function a(){return b.function_rewritten?void window.LC_API.set_custom_variables(b.livechat_custom_vars):setTimeout(a,50)}var b=this;a()}}]),a}();c["default"]=f},{}],7:[function(a,b,c){"use strict";function d(a){return a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(b){e(this,a),this.last_sent_snippet=[];var c=this;try{var f=window.olark;window.olark=function(){if(arguments[0]&&"api.chat.updateVisitorStatus"===arguments[0]){var a=arguments[1].snippet;c.last_sent_snippet="object"===("undefined"==typeof a?"undefined":d(a))?a:[a],a=c.last_sent_snippet.slice(),b.peekin_id&&a.push("Watch screen: https://peekin.io/"+b.peekin_id),arguments[1]={snippet:a}}return f.apply(f,arguments)};for(var g in f)window.olark[g]=f[g]}catch(h){console.log(h)}}return f(a,[{key:"live",value:function(){var a=this.last_sent_snippet;window.olark("api.chat.updateVisitorStatus",{snippet:a})}}]),a}();c["default"]=g},{}],8:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(b){d(this,a),this.integrations=b,this.peekin_link=null,this.is_chatting=!1;var c=this;$zopim(function(){$zopim.livechat.setOnChatStart(function(){c.is_chatting=!0,c.peekin_link&&$zopim.livechat.addTags(c.peekin_link)}),$zopim.livechat.setOnChatEnd(function(){c.is_chatting=!1,c.peekin_link&&$zopim.livechat.removeTags(c.peekin_link)})})}return e(a,[{key:"live",value:function(){this.peekin_link="Watch screen: https://peekin.io/"+this.integrations.peekin_id,this.is_chatting&&$zopim.livechat.addTags(this.peekin_link)}}]),a}();c["default"]=f},{}],9:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0});var f=a("./css_injections"),g=function(){function a(){d(this,a),this.inject_elements(),this.hide_timeout=null}return e(a,[{key:"show",value:function(){this.hide_timeout&&clearTimeout(this.hide_timeout),this.overlay_el.style.display="block",this.overlay_el.className="peekin___overlay-show"}},{key:"hide",value:function(){this.overlay_el.className="",this.hide_timeout=setTimeout(function(){this.overlay_el.style.display="none"}.bind(this),300)}},{key:"move",value:function(a,b){this.overlay_el.style.top=b-5e3+"px",this.overlay_el.style.left=a-5e3+"px"}},{key:"inject_elements",value:function(){var a=document.createElement("style"),b=document.createElement("div"),c=document.head||document.getElementsByTagName("head")[0],d=document.body||document.getElementsByTagName("body")[0];a.type="text/css",a.styleSheet?a.styleSheet.cssText=f.pointer_style:a.appendChild(document.createTextNode(f.pointer_style)),c.appendChild(a),b.id="peekin___overlay",d.appendChild(b),this.overlay_el=b}}]),a}();c["default"]=g},{"./css_injections":3}],10:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0});var g=a("./css_injections"),h=a("../dom"),i=a("../utils"),j=function(){function a(){d(this,a),this.inject_elements(),this.remote_control_enabled=!1,this.stylesheets_injected=!1}return f(a,[{key:"inject_elements",value:function(){var a=document.createElement("style"),b=document.createElement("div"),c=document.createElement("p"),d=document.createElement("div"),e=document.head||document.getElementsByTagName("head")[0],f=document.body||document.getElementsByTagName("body")[0];a.type="text/css",a.styleSheet?a.styleSheet.cssText=g.remote_control_style:a.appendChild(document.createTextNode(g.remote_control_style)),e.appendChild(a),b.id="peekin___remote_control_stopper",f.appendChild(b),d.id="peekin___remote_control_cursor",c.innerHTML="This tab is being controlled remotely",b.appendChild(d),b.appendChild(c),this.overlay_el=b,this.cursor_el=d,this.overlay_el.addEventListener("mousewheel",function(a){this.remote_control_enabled&&a.preventDefault()}.bind(this))}},{key:"inject_stylesheets",value:function(){if(!this.stylesheets_injected){for(var a=[],b=window.peekin.dev?"//localhost:3005/proxy/css/":"https://api.peekin.io/proxy/css/",c=0;c<document.styleSheets.length;c++){var d=document.styleSheets[c];if(d.href)a.push(d.href);else if(d.cssRules)for(var e=0;e<d.cssRules.length;e++){var f=d.cssRules[e];f.href&&a.push(f.href)}}var g=!0,h=!1,j=void 0;try{for(var k,l=a[Symbol.iterator]();!(g=(k=l.next()).done);g=!0){var m=k.value,n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=b+(0,i.utf8_to_b64)(m),document.head.appendChild(n),console.log(m)}}catch(o){h=!0,j=o}finally{try{!g&&l["return"]&&l["return"]()}finally{if(h)throw j}}this.stylesheets_injected=!0}}},{key:"enable",value:function(){this.overlay_el.className="peekin__remote_control_active",this.remote_control_enabled=!0,document.activeElement&&document.activeElement!==document.getElementsByTagName("body")[0]&&document.activeElement.blur(),this.inject_stylesheets(),window.peekin.hooks&&window.peekin.hooks.remote_control_start&&window.peekin.hooks.remote_control_start()}},{key:"disable",value:function(){this.overlay_el.className="",this.remote_control_enabled=!1;for(var a=document.querySelectorAll("[peek-status-hover]"),b=0;b<a.length;b++){var c=a[b];c.removeAttribute("peek-status-hover")}window.peekin.hooks&&window.peekin.hooks.remote_control_end&&window.peekin.hooks.remote_control_end()}},{key:"_select_element",value:function(a){return document.querySelector('[peekin-uid="'+a+'"]')}},{key:"_fire_event",value:function(a,b){var c;if(a.ownerDocument)c=a.ownerDocument;else{if(9!=a.nodeType)throw new Error("Invalid node passed to fireEvent: "+a.id);c=a}if(a.dispatchEvent){var d="";switch(b){case"click":case"mousedown":case"mouseup":case"dblclick":case"mouseenter":case"mouseleave":case"mouseout":case"mouseover":d="MouseEvents";break;case"focus":case"change":case"blur":case"select":d="HTMLEvents";break;default:throw"fireEvent: Couldn't find an event class for event '"+b+"'."}var e=c.createEvent(d);e.initEvent(b,!0,!0),e.synthetic=!0,a.dispatchEvent(e,!0)}else if(a.fireEvent){var e=c.createEventObject();e.synthetic=!0,a.fireEvent("on"+b,e)}}},{key:"handle_event",value:function(a,b){var c=this,d={move_cursor:function(a){var b=a.split(","),d=e(b,3),f=d[0],g=d[1],h=d[2];if(c.cursor_el.style.top=g+"px",c.cursor_el.style.left=f+"px","x"!==h){for(var i=c._select_element(h),j=[i];i=i.parentNode;)"function"==typeof i.setAttribute&&j.push(i);for(var k=document.querySelectorAll("[peek-status-hover]"),l=0;l<k.length;l++){var m=k[l];-1===j.indexOf(m)&&(m.removeAttribute("peek-status-hover"),c._fire_event(m,"mouseout"),c._fire_event(m,"mouseleave"))}var n=!0,o=!1,p=void 0;try{for(var q,r=j[Symbol.iterator]();!(n=(q=r.next()).done);n=!0){var m=q.value;m.setAttribute("peek-status-hover","customer"),c._fire_event(m,"mouseover"),c._fire_event(m,"mouseenter")}}catch(s){o=!0,p=s}finally{try{!n&&r["return"]&&r["return"]()}finally{if(o)throw p}}}},click:function(a){var b=c._select_element(a);c.cursor_el.classList.remove("click"),c.cursor_el.offsetWidth,c.cursor_el.classList.add("click"),b&&c._fire_event(b,"click")},dblclick:function(a){var b=c._select_element(a);c.cursor_el.classList.remove("click"),c.cursor_el.offsetWidth,c.cursor_el.classList.add("click"),b&&c._fire_event(b,"dblclick")},scroll:function(a){for(var b=window.scrollX,d=window.scrollY,e=c._select_element(a.el),f=document.getElementsByTagName("body")[0];e!==f;){if((0,h.is_scrollable)(e)&&(0!==a.y&&e.scrollTop+a.y>0&&e.scrollTop+a.y+e.clientHeight<e.scrollHeight||0!==a.x&&e.scrollLeft+a.x>0&&e.scrollLeft+a.x+e.clientWidth<e.scrollWidth))return e.scrollTop+=a.y,void(e.scrollLeft+=a.x);e=e.parentNode}window.scrollTo(b+a.x,d+a.y)},value_change:function(a){var b=c._select_element(a.el);b&&(b.value=a.value)}};d[a](b)}}]),a}();c["default"]=j},{"../dom":11,"../utils":13,"./css_injections":3}],11:[function(a,b,c){"use strict";function d(a,b){if(1===a.nodeType)return e(a);for(b=b||a.parentNode;null!=a;){if(1===a.nodeType)return d(a)+"+";a=a.previousSibling}return e(b)+"^"}function e(a){if("undefined"!=typeof a.getAttribute)return a.getAttribute("peekin-uid");var b=g(a);return b["peekin-uid"]?b["peekin-uid"]:null}function f(a){return a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth}function g(a){for(var b={},c=0;c<a.attributes.length;c++){var d=a.attributes[c];b[d.name]=d.value}return b}function h(a){for(var b=a,c=a.textContent;null!=(b=b.previousSibling)&&3===b.nodeType;)c=b.textContent+c;for(b=a;null!=(b=b.nextSibling)&&3===b.nodeType;)c+=b.textContent;return c}function i(){return"undefined"!=typeof window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}function j(){return"undefined"!=typeof window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}function k(a){for(var b=[];a;)b.unshift(a),a=a.parentNode;return b}Object.defineProperty(c,"__esModule",{value:!0}),c.element_id=d,c.is_scrollable=f,c.get_attributes=g,
c.get_merged_text_nodes=h,c.window_scrollX=i,c.window_scrollY=j,c.element_parents=k;a("./utils")},{"./utils":13}],12:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./components/connection"),i=d(h);"undefined"==typeof Promise&&(window.Promise=a("es6-promise").Promise),"undefined"==typeof Symbol&&a("es6-symbol/implement"),function(a,b,c){var d=function(){function b(){e(this,b);var c=this;a.peekin=a.peekin||{},a.peekin.identities?(a.peekin._identities=a.peekin.identities,delete a.peekin.identities):a.peekin.identity&&(a.peekin._identities=[a.peekin.identity],delete a.peekin.identity),Object.defineProperty(a.peekin,"identities",{get:function(){return this._identities},set:function(a){this._identities=a,c.identities_changed()}}),Object.defineProperty(a.peekin,"identity",{get:function(){return this._identities[0]},set:function(a){this._identities=[a],c.identities_changed()}}),this.peekin_id=null,this.identities=null,this.connection=this.init(a.peekin)}return g(b,[{key:"init",value:function(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],d=this,e=b.api_key,g={dev:b.dev||!1,disable_forms:b.disable_forms||!1,identities:b._identities||null,version:"0.1.21",hooks:b.hooks||{}};if(!e)throw new Error("You need to provide an API key");var h=c.getItem("peekin-userID"),j=c.getItem("peekin-firstSeen"),k=function(e){var g=e.split(":"),h=f(g,2),i=h[0],j=h[1];d.peekin_id=i,a.peekin.peekin_id=i,c.setItem("peekin-userID",i),c.setItem("peekin-firstSeen",j),b.hooks&&b.hooks.after_init&&b.hooks.after_init()};return new i["default"](e,h,j,k,g)}},{key:"identities_changed",value:function(){this.connection.notify_identities(a.peekin._identities)}}]),b}();return new d}(window,document,sessionStorage)},{"./components/connection":2,"es6-promise":52,"es6-symbol/implement":53}],13:[function(a,b,c){"use strict";function d(a){return window.btoa(encodeURIComponent(a))}function e(a){return decodeURIComponent(window.atob(a))}function f(a,b){var c=!1,d=null;return function(){var e=this,f=arguments;c?(clearTimeout(d),d=setTimeout(function(){a.apply(e,f)},b)):(clearTimeout(d),a.apply(e,f),c=!0,setTimeout(function(){c=!1},b))}}function g(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}Object.defineProperty(c,"__esModule",{value:!0}),c.utf8_to_b64=d,c.b64_to_utf8=e,c.throttle=f,c.object_values=g},{}],14:[function(a,b,c){function d(a,b,c){function d(a,e){if(d.count<=0)throw new Error("after called too many times");--d.count,a?(f=!0,b(a),b=c):0!==d.count||f||b(null,e)}var f=!1;return c=c||e,d.count=a,0===a?b():d}function e(){}b.exports=d},{}],15:[function(a,b,c){b.exports=function(a,b,c){var d=a.byteLength;if(b=b||0,c=c||d,a.slice)return a.slice(b,c);if(0>b&&(b+=d),0>c&&(c+=d),c>d&&(c=d),b>=d||b>=c||0===d)return new ArrayBuffer(0);for(var e=new Uint8Array(a),f=new Uint8Array(c-b),g=b,h=0;c>g;g++,h++)f[h]=e[g];return f.buffer}},{}],16:[function(a,b,c){function d(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}b.exports=d,d.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var b=Math.random(),c=Math.floor(b*this.jitter*a);a=0==(1&Math.floor(10*b))?a-c:a+c}return 0|Math.min(a,this.max)},d.prototype.reset=function(){this.attempts=0},d.prototype.setMin=function(a){this.ms=a},d.prototype.setMax=function(a){this.max=a},d.prototype.setJitter=function(a){this.jitter=a}},{}],17:[function(a,b,c){!function(a){"use strict";c.encode=function(b){var c,d=new Uint8Array(b),e=d.length,f="";for(c=0;e>c;c+=3)f+=a[d[c]>>2],f+=a[(3&d[c])<<4|d[c+1]>>4],f+=a[(15&d[c+1])<<2|d[c+2]>>6],f+=a[63&d[c+2]];return e%3===2?f=f.substring(0,f.length-1)+"=":e%3===1&&(f=f.substring(0,f.length-2)+"=="),f},c.decode=function(b){var c,d,e,f,g,h=.75*b.length,i=b.length,j=0;"="===b[b.length-1]&&(h--,"="===b[b.length-2]&&h--);var k=new ArrayBuffer(h),l=new Uint8Array(k);for(c=0;i>c;c+=4)d=a.indexOf(b[c]),e=a.indexOf(b[c+1]),f=a.indexOf(b[c+2]),g=a.indexOf(b[c+3]),l[j++]=d<<2|e>>4,l[j++]=(15&e)<<4|f>>2,l[j++]=(3&f)<<6|63&g;return k}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],18:[function(a,b,c){(function(a){function c(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.buffer instanceof ArrayBuffer){var d=c.buffer;if(c.byteLength!==d.byteLength){var e=new Uint8Array(c.byteLength);e.set(new Uint8Array(d,c.byteOffset,c.byteLength)),d=e.buffer}a[b]=d}}}function d(a,b){b=b||{};var d=new f;c(a);for(var e=0;e<a.length;e++)d.append(a[e]);return b.type?d.getBlob(b.type):d.getBlob()}function e(a,b){return c(a),new Blob(a,b||{})}var f=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder,g=function(){try{var a=new Blob(["hi"]);return 2===a.size}catch(b){return!1}}(),h=g&&function(){try{var a=new Blob([new Uint8Array([1,2])]);return 2===a.size}catch(b){return!1}}(),i=f&&f.prototype.append&&f.prototype.getBlob;b.exports=function(){return g?h?a.Blob:e:i?d:void 0}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(a,b,c){var d=[].slice;b.exports=function(a,b){if("string"==typeof b&&(b=a[b]),"function"!=typeof b)throw new Error("bind() requires a function");var c=d.call(arguments,2);return function(){return b.apply(a,c.concat(d.call(arguments)))}}},{}],20:[function(a,b,c){function d(a){return a?e(a):void 0}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}b.exports=d,d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],21:[function(a,b,c){b.exports=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],22:[function(a,b,c){"use strict";var d,e=a("es5-ext/object/assign"),f=a("es5-ext/object/normalize-options"),g=a("es5-ext/object/is-callable"),h=a("es5-ext/string/#/contains");d=b.exports=function(a,b){var c,d,g,i,j;return arguments.length<2||"string"!=typeof a?(i=b,b=a,a=null):i=arguments[2],null==a?(c=g=!0,d=!1):(c=h.call(a,"c"),d=h.call(a,"e"),g=h.call(a,"w")),j={value:b,configurable:c,enumerable:d,writable:g},i?e(f(i),j):j},d.gs=function(a,b,c){var d,i,j,k;return"string"!=typeof a?(j=c,c=b,b=a,a=null):j=arguments[3],null==b?b=void 0:g(b)?null==c?c=void 0:g(c)||(j=c,c=void 0):(j=b,b=c=void 0),null==a?(d=!0,i=!1):(d=h.call(a,"c"),i=h.call(a,"e")),k={get:b,set:c,configurable:d,enumerable:i},j?e(f(j),k):k}},{"es5-ext/object/assign":40,"es5-ext/object/is-callable":43,"es5-ext/object/normalize-options":47,"es5-ext/string/#/contains":49}],23:[function(a,b,c){b.exports=a("./lib/")},{"./lib/":24}],24:[function(a,b,c){b.exports=a("./socket"),b.exports.parser=a("engine.io-parser")},{"./socket":25,"engine.io-parser":37}],25:[function(a,b,c){(function(c){function d(a,b){if(!(this instanceof d))return new d(a,b);if(b=b||{},a&&"object"==typeof a&&(b=a,a=null),a&&(a=k(a),b.host=a.host,b.secure="https"==a.protocol||"wss"==a.protocol,b.port=a.port,a.query&&(b.query=a.query)),this.secure=null!=b.secure?b.secure:c.location&&"https:"==location.protocol,b.host){var e=b.host.split(":");b.hostname=e.shift(),e.length?b.port=e.pop():b.port||(b.port=this.secure?"443":"80")}this.agent=b.agent||!1,this.hostname=b.hostname||(c.location?location.hostname:"localhost"),this.port=b.port||(c.location&&location.port?location.port:this.secure?443:80),this.query=b.query||{},"string"==typeof this.query&&(this.query=m.decode(this.query)),this.upgrade=!1!==b.upgrade,this.path=(b.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!b.forceJSONP,this.jsonp=!1!==b.jsonp,this.forceBase64=!!b.forceBase64,this.enablesXDR=!!b.enablesXDR,this.timestampParam=b.timestampParam||"t",this.timestampRequests=b.timestampRequests,this.transports=b.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=b.policyPort||843,this.rememberUpgrade=b.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=b.onlyBinaryUpgrades,this.pfx=b.pfx||null,this.key=b.key||null,this.passphrase=b.passphrase||null,this.cert=b.cert||null,this.ca=b.ca||null,this.ciphers=b.ciphers||null,this.rejectUnauthorized=b.rejectUnauthorized||null,this.open()}function e(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}var f=a("./transports"),g=a("component-emitter"),h=a("debug")("engine.io-client:socket"),i=a("indexof"),j=a("engine.io-parser"),k=a("parseuri"),l=a("parsejson"),m=a("parseqs");b.exports=d,d.priorWebsocketSuccess=!1,g(d.prototype),d.protocol=j.protocol,d.Socket=d,d.Transport=a("./transport"),d.transports=a("./transports"),d.parser=a("engine.io-parser"),d.prototype.createTransport=function(a){h('creating transport "%s"',a);var b=e(this.query);b.EIO=j.protocol,b.transport=a,this.id&&(b.sid=this.id);var c=new f[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:b,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized});return c},d.prototype.open=function(){var a;if(this.rememberUpgrade&&d.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))a="websocket";else{if(0==this.transports.length){var b=this;return void setTimeout(function(){b.emit("error","No transports available")},0)}a=this.transports[0]}this.readyState="opening";var a;try{a=this.createTransport(a)}catch(c){return this.transports.shift(),void this.open()}a.open(),this.setTransport(a)},d.prototype.setTransport=function(a){h("setting transport %s",a.name);var b=this;this.transport&&(h("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=a,a.on("drain",function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",function(){b.onClose("transport close")})},d.prototype.probe=function(a){function b(){if(m.onlyBinaryUpgrades){var b=!this.supportsBinary&&m.transport.supportsBinary;l=l||b}l||(h('probe transport "%s" opened',a),k.send([{type:"ping",data:"probe"}]),k.once("packet",function(b){if(!l)if("pong"==b.type&&"probe"==b.data){if(h('probe transport "%s" pong',a),m.upgrading=!0,m.emit("upgrading",k),!k)return;d.priorWebsocketSuccess="websocket"==k.name,h('pausing current transport "%s"',m.transport.name),m.transport.pause(function(){l||"closed"!=m.readyState&&(h("changing transport and sending upgrade packet"),j(),m.setTransport(k),k.send([{type:"upgrade"}]),m.emit("upgrade",k),k=null,m.upgrading=!1,m.flush())})}else{h('probe transport "%s" failed',a);var c=new Error("probe error");c.transport=k.name,m.emit("upgradeError",c)}}))}function c(){l||(l=!0,j(),k.close(),k=null)}function e(b){var d=new Error("probe error: "+b);d.transport=k.name,c(),h('probe transport "%s" failed because of error: %s',a,b),m.emit("upgradeError",d)}function f(){e("transport closed")}function g(){e("socket closed")}function i(a){k&&a.name!=k.name&&(h('"%s" works - aborting "%s"',a.name,k.name),c())}function j(){k.removeListener("open",b),k.removeListener("error",e),k.removeListener("close",f),m.removeListener("close",g),m.removeListener("upgrading",i)}h('probing transport "%s"',a);var k=this.createTransport(a,{probe:1}),l=!1,m=this;d.priorWebsocketSuccess=!1,k.once("open",b),k.once("error",e),k.once("close",f),this.once("close",g),this.once("upgrading",i),k.open()},d.prototype.onOpen=function(){if(h("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){h("starting upgrade probes");for(var a=0,b=this.upgrades.length;b>a;a++)this.probe(this.upgrades[a])}},d.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(h('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case"open":this.onHandshake(l(a.data));break;case"pong":this.setPing();break;case"error":var b=new Error("server error");b.code=a.data,this.emit("error",b);break;case"message":this.emit("data",a.data),this.emit("message",a.data)}else h('packet received with socket readyState "%s"',this.readyState)},d.prototype.onHandshake=function(a){this.emit("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this.upgrades=this.filterUpgrades(a.upgrades),this.pingInterval=a.pingInterval,this.pingTimeout=a.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},d.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var b=this;b.pingTimeoutTimer=setTimeout(function(){"closed"!=b.readyState&&b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)},d.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer),a.pingIntervalTimer=setTimeout(function(){h("writing ping packet - expecting pong within %sms",a.pingTimeout),a.ping(),a.onHeartbeat(a.pingTimeout)},a.pingInterval)},d.prototype.ping=function(){this.sendPacket("ping")},d.prototype.onDrain=function(){for(var a=0;a<this.prevBufferLen;a++)this.callbackBuffer[a]&&this.callbackBuffer[a]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},d.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(h("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},d.prototype.write=d.prototype.send=function(a,b){return this.sendPacket("message",a,b),this},d.prototype.sendPacket=function(a,b,c){if("closing"!=this.readyState&&"closed"!=this.readyState){var d={type:a,data:b};this.emit("packetCreate",d),this.writeBuffer.push(d),this.callbackBuffer.push(c),this.flush()}},d.prototype.close=function(){function a(){d.onClose("forced close"),h("socket closing - telling transport to close"),d.transport.close()}function b(){d.removeListener("upgrade",b),d.removeListener("upgradeError",b),a()}function c(){d.once("upgrade",b),d.once("upgradeError",b)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var d=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?c():a()}):this.upgrading?c():a()}return this},d.prototype.onError=function(a){h("socket error %j",a),d.priorWebsocketSuccess=!1,this.emit("error",a),this.onClose("transport error",a)},d.prototype.onClose=function(a,b){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){h('socket close with reason: "%s"',a);var c=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){c.writeBuffer=[],c.callbackBuffer=[],c.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",a,b)}},d.prototype.filterUpgrades=function(a){for(var b=[],c=0,d=a.length;d>c;c++)~i(this.transports,a[c])&&b.push(a[c]);return b}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":26,"./transports":27,"component-emitter":20,debug:33,"engine.io-parser":37,indexof:61,parsejson:66,parseqs:67,parseuri:36}],26:[function(a,b,c){function d(a){this.path=a.path,this.hostname=a.hostname,this.port=a.port,this.secure=a.secure,this.query=a.query,this.timestampParam=a.timestampParam,this.timestampRequests=a.timestampRequests,this.readyState="",this.agent=a.agent||!1,this.socket=a.socket,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized}var e=a("engine.io-parser"),f=a("component-emitter");b.exports=d,f(d.prototype),d.timestamps=0,d.prototype.onError=function(a,b){var c=new Error(a);return c.type="TransportError",c.description=b,this.emit("error",c),this},d.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},d.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},d.prototype.send=function(a){if("open"!=this.readyState)throw new Error("Transport not open");this.write(a)},d.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},d.prototype.onData=function(a){var b=e.decodePacket(a,this.socket.binaryType);this.onPacket(b)},d.prototype.onPacket=function(a){this.emit("packet",a)},d.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":20,"engine.io-parser":37}],27:[function(a,b,c){(function(b){function d(a){var c,d=!1,h=!1,i=!1!==a.jsonp;if(b.location){var j="https:"==location.protocol,k=location.port;k||(k=j?443:80),d=a.hostname!=location.hostname||k!=a.port,h=a.secure!=j}if(a.xdomain=d,a.xscheme=h,c=new e(a),"open"in c&&!a.forceJSONP)return new f(a);if(!i)throw new Error("JSONP disabled");return new g(a)}var e=a("xmlhttprequest"),f=a("./polling-xhr"),g=a("./polling-jsonp"),h=a("./websocket");c.polling=d,c.websocket=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":28,"./polling-xhr":29,"./websocket":31,xmlhttprequest:32}],28:[function(a,b,c){(function(c){function d(){}function e(a){f.call(this,a),this.query=this.query||{},h||(c.___eio||(c.___eio=[]),h=c.___eio),this.index=h.length;var b=this;h.push(function(a){b.onData(a)}),this.query.j=this.index,c.document&&c.addEventListener&&c.addEventListener("beforeunload",function(){b.script&&(b.script.onerror=d)},!1)}var f=a("./polling"),g=a("component-inherit");b.exports=e;var h,i=/\n/g,j=/\\n/g;g(e,f),e.prototype.supportsBinary=!1,e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),f.prototype.doClose.call(this)},e.prototype.doPoll=function(){var a=this,b=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),b.async=!0,b.src=this.uri(),b.onerror=function(b){a.onError("jsonp poll error",b)};var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c),this.script=b;var d="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);d&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)},100)},e.prototype.doWrite=function(a,b){function c(){d(),b()}function d(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(a){e.onError("jsonp polling iframe removal error",a)}try{var b='<iframe src="javascript:0" name="'+e.iframeId+'">';f=document.createElement(b)}catch(a){f=document.createElement("iframe"),f.name=e.iframeId,f.src="javascript:0"}f.id=e.iframeId,e.form.appendChild(f),e.iframe=f}var e=this;if(!this.form){var f,g=document.createElement("form"),h=document.createElement("textarea"),k=this.iframeId="eio_iframe_"+this.index;g.className="socketio",g.style.position="absolute",g.style.top="-1000px",g.style.left="-1000px",g.target=k,g.method="POST",g.setAttribute("accept-charset","utf-8"),h.name="d",g.appendChild(h),document.body.appendChild(g),this.form=g,this.area=h}this.form.action=this.uri(),d(),a=a.replace(j,"\\\n"),this.area.value=a.replace(i,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==e.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":30,"component-inherit":21}],29:[function(a,b,c){(function(c){function d(){}function e(a){if(i.call(this,a),c.location){var b="https:"==location.protocol,d=location.port;d||(d=b?443:80),this.xd=a.hostname!=c.location.hostname||d!=a.port,this.xs=a.secure!=b}}function f(a){this.method=a.method||"GET",this.uri=a.uri,this.xd=!!a.xd,this.xs=!!a.xs,this.async=!1!==a.async,this.data=void 0!=a.data?a.data:null,this.agent=a.agent,this.isBinary=a.isBinary,this.supportsBinary=a.supportsBinary,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.create()}function g(){for(var a in f.requests)f.requests.hasOwnProperty(a)&&f.requests[a].abort()}var h=a("xmlhttprequest"),i=a("./polling"),j=a("component-emitter"),k=a("component-inherit"),l=a("debug")("engine.io-client:polling-xhr");b.exports=e,b.exports.Request=f,k(e,i),e.prototype.supportsBinary=!0,e.prototype.request=function(a){return a=a||{},a.uri=this.uri(),a.xd=this.xd,a.xs=this.xs,a.agent=this.agent||!1,a.supportsBinary=this.supportsBinary,a.enablesXDR=this.enablesXDR,a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized,new f(a)},e.prototype.doWrite=function(a,b){var c="string"!=typeof a&&void 0!==a,d=this.request({method:"POST",data:a,isBinary:c}),e=this;d.on("success",b),d.on("error",function(a){e.onError("xhr post error",a)}),this.sendXhr=d},e.prototype.doPoll=function(){l("xhr poll");var a=this.request(),b=this;a.on("data",function(a){b.onData(a)}),a.on("error",function(a){b.onError("xhr poll error",a)}),this.pollXhr=a},j(f.prototype),f.prototype.create=function(){var a={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized;var b=this.xhr=new h(a),d=this;try{if(l("xhr open %s: %s",this.method,this.uri),b.open(this.method,this.uri,this.async),this.supportsBinary&&(b.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?b.setRequestHeader("Content-type","application/octet-stream"):b.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in b&&(b.withCredentials=!0),this.hasXDR()?(b.onload=function(){d.onLoad()},b.onerror=function(){d.onError(b.responseText)}):b.onreadystatechange=function(){4==b.readyState&&(200==b.status||1223==b.status?d.onLoad():setTimeout(function(){d.onError(b.status)},0))},l("xhr data %s",this.data),b.send(this.data)}catch(e){return void setTimeout(function(){d.onError(e)},0)}c.document&&(this.index=f.requestsCount++,f.requests[this.index]=this)},f.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},f.prototype.onData=function(a){this.emit("data",a),this.onSuccess()},f.prototype.onError=function(a){this.emit("error",a),this.cleanup(!0)},f.prototype.cleanup=function(a){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=d:this.xhr.onreadystatechange=d,a)try{this.xhr.abort()}catch(b){}c.document&&delete f.requests[this.index],this.xhr=null}},f.prototype.onLoad=function(){var a;try{var b;try{b=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(c){}a="application/octet-stream"===b?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(c){this.onError(c)}null!=a&&this.onData(a)},f.prototype.hasXDR=function(){return"undefined"!=typeof c.XDomainRequest&&!this.xs&&this.enablesXDR},f.prototype.abort=function(){this.cleanup()},c.document&&(f.requestsCount=0,f.requests={},c.attachEvent?c.attachEvent("onunload",g):c.addEventListener&&c.addEventListener("beforeunload",g,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":30,"component-emitter":20,"component-inherit":21,debug:33,xmlhttprequest:32}],30:[function(a,b,c){function d(a){var b=a&&a.forceBase64;(!j||b)&&(this.supportsBinary=!1),e.call(this,a)}var e=a("../transport"),f=a("parseqs"),g=a("engine.io-parser"),h=a("component-inherit"),i=a("debug")("engine.io-client:polling");b.exports=d;var j=function(){var b=a("xmlhttprequest"),c=new b({xdomain:!1});return null!=c.responseType}();h(d,e),d.prototype.name="polling",d.prototype.doOpen=function(){this.poll()},d.prototype.pause=function(a){function b(){i("paused"),c.readyState="paused",a()}var c=this;if(this.readyState="pausing",this.polling||!this.writable){var d=0;this.polling&&(i("we are currently polling - waiting to pause"),d++,this.once("pollComplete",function(){i("pre-pause polling complete"),--d||b()})),this.writable||(i("we are currently writing - waiting to pause"),d++,this.once("drain",function(){i("pre-pause writing complete"),--d||b()}))}else b()},d.prototype.poll=function(){i("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},d.prototype.onData=function(a){var b=this;i("polling got data %s",a);var c=function(a,c,d){return"opening"==b.readyState&&b.onOpen(),"close"==a.type?(b.onClose(),!1):void b.onPacket(a)};g.decodePayload(a,this.socket.binaryType,c),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():i('ignoring poll - transport state "%s"',this.readyState))},d.prototype.doClose=function(){function a(){i("writing close packet"),b.write([{type:"close"}])}var b=this;"open"==this.readyState?(i("transport open - closing"),a()):(i("transport not open - deferring close"),this.once("open",a))},d.prototype.write=function(a){var b=this;this.writable=!1;var c=function(){b.writable=!0,b.emit("drain")},b=this;g.encodePayload(a,this.supportsBinary,function(a){b.doWrite(a,c)})},d.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",c="";return!1!==this.timestampRequests&&(a[this.timestampParam]=+new Date+"-"+e.timestamps++),this.supportsBinary||a.sid||(a.b64=1),a=f.encode(a),this.port&&("https"==b&&443!=this.port||"http"==b&&80!=this.port)&&(c=":"+this.port),a.length&&(a="?"+a),b+"://"+this.hostname+c+this.path+a}},{"../transport":26,"component-inherit":21,debug:33,"engine.io-parser":37,parseqs:67,xmlhttprequest:32}],31:[function(a,b,c){function d(a){var b=a&&a.forceBase64;b&&(this.supportsBinary=!1),e.call(this,a)}var e=a("../transport"),f=a("engine.io-parser"),g=a("parseqs"),h=a("component-inherit"),i=a("debug")("engine.io-client:websocket"),j=a("ws");b.exports=d,h(d,e),d.prototype.name="websocket",d.prototype.supportsBinary=!0,d.prototype.doOpen=function(){if(this.check()){var a=this.uri(),b=void 0,c={agent:this.agent};c.pfx=this.pfx,c.key=this.key,c.passphrase=this.passphrase,c.cert=this.cert,c.ca=this.ca,c.ciphers=this.ciphers,c.rejectUnauthorized=this.rejectUnauthorized,this.ws=new j(a,b,c),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},d.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()},this.ws.onclose=function(){a.onClose()},this.ws.onmessage=function(b){a.onData(b.data)},this.ws.onerror=function(b){a.onError("websocket error",b)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(d.prototype.onData=function(a){var b=this;setTimeout(function(){e.prototype.onData.call(b,a)},0)}),d.prototype.write=function(a){function b(){c.writable=!0,c.emit("drain")}var c=this;this.writable=!1;for(var d=0,e=a.length;e>d;d++)f.encodePacket(a[d],this.supportsBinary,function(a){try{c.ws.send(a)}catch(b){i("websocket closed before onclose event")}});setTimeout(b,0)},d.prototype.onClose=function(){e.prototype.onClose.call(this)},d.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},d.prototype.uri=function(){var a=this.query||{},b=this.secure?"wss":"ws",c="";return this.port&&("wss"==b&&443!=this.port||"ws"==b&&80!=this.port)&&(c=":"+this.port),this.timestampRequests&&(a[this.timestampParam]=+new Date),this.supportsBinary||(a.b64=1),a=g.encode(a),a.length&&(a="?"+a),b+"://"+this.hostname+c+this.path+a},d.prototype.check=function(){return!(!j||"__initialize"in j&&this.name===d.prototype.name)}},{"../transport":26,"component-inherit":21,debug:33,"engine.io-parser":37,parseqs:67,ws:83}],32:[function(a,b,c){var d=a("has-cors");b.exports=function(a){var b=a.xdomain,c=a.xscheme,e=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!b||d))return new XMLHttpRequest}catch(f){}try{if("undefined"!=typeof XDomainRequest&&!c&&e)return new XDomainRequest}catch(f){}if(!b)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(f){}}},{"has-cors":60}],33:[function(a,b,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function e(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff),!b)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d),a}function f(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?localStorage.removeItem("debug"):localStorage.debug=a}catch(b){}}function h(){var a;try{a=localStorage.debug}catch(b){}return a}c=b.exports=a("./debug"),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d,c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())},{"./debug":34}],34:[function(a,b,c){function d(){return c.colors[k++%c.colors.length]}function e(a){function b(){}function e(){var a=e,b=+new Date,f=b-(j||b);a.diff=f,a.prev=j,a.curr=b,j=b,null==a.useColors&&(a.useColors=c.useColors()),
null==a.color&&a.useColors&&(a.color=d());var g=Array.prototype.slice.call(arguments);g[0]=c.coerce(g[0]),"string"!=typeof g[0]&&(g=["%o"].concat(g));var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(b,d){if("%%"===b)return b;h++;var e=c.formatters[d];if("function"==typeof e){var f=g[h];b=e.call(a,f),g.splice(h,1),h--}return b}),"function"==typeof c.formatArgs&&(g=c.formatArgs.apply(a,g));var i=e.log||c.log||console.log.bind(console);i.apply(a,g)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}function f(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),d=b.length,e=0;d>e;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))}function g(){c.enable("")}function h(a){var b,d;for(b=0,d=c.skips.length;d>b;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;d>b;b++)if(c.names[b].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}c=b.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a("ms"),c.names=[],c.skips=[],c.formatters={};var j,k=0},{ms:35}],35:[function(a,b,c){function d(a){var b=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"y":return c*l;case"days":case"day":case"d":return c*k;case"hours":case"hour":case"h":return c*j;case"minutes":case"minute":case"m":return c*i;case"seconds":case"second":case"s":return c*h;case"ms":return c}}}function e(a){return a>=k?Math.round(a/k)+"d":a>=j?Math.round(a/j)+"h":a>=i?Math.round(a/i)+"m":a>=h?Math.round(a/h)+"s":a+"ms"}function f(a){return g(a,k,"day")||g(a,j,"hour")||g(a,i,"minute")||g(a,h,"second")||a+" ms"}function g(a,b,c){return b>a?void 0:1.5*b>a?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var h=1e3,i=60*h,j=60*i,k=24*j,l=365.25*k;b.exports=function(a,b){return b=b||{},"string"==typeof a?d(a):b["long"]?f(a):e(a)}},{}],36:[function(a,b,c){var d=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.exports=function(a){var b=a,c=a.indexOf("["),f=a.indexOf("]");-1!=c&&-1!=f&&(a=a.substring(0,c)+a.substring(c,f).replace(/:/g,";")+a.substring(f,a.length));for(var g=d.exec(a||""),h={},i=14;i--;)h[e[i]]=g[i]||"";return-1!=c&&-1!=f&&(h.source=b,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h}},{}],37:[function(a,b,c){(function(b){function d(a,b){var d="b"+c.packets[a.type]+a.data.data;return b(d)}function e(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=a.data,f=new Uint8Array(e),g=new Uint8Array(1+e.byteLength);g[0]=r[a.type];for(var h=0;h<f.length;h++)g[h+1]=f[h];return d(g.buffer)}function f(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=new FileReader;return e.onload=function(){a.data=e.result,c.encodePacket(a,b,!0,d)},e.readAsArrayBuffer(a.data)}function g(a,b,d){if(!b)return c.encodeBase64Packet(a,d);if(q)return f(a,b,d);var e=new Uint8Array(1);e[0]=r[a.type];var g=new u([e.buffer,a.data]);return d(g)}function h(a,b,c){for(var d=new Array(a.length),e=m(a.length,c),f=function(a,c,e){b(c,function(b,c){d[a]=c,e(b,d)})},g=0;g<a.length;g++)f(g,a[g],e)}var i=a("./keys"),j=a("has-binary"),k=a("arraybuffer.slice"),l=a("base64-arraybuffer"),m=a("after"),n=a("utf8"),o=navigator.userAgent.match(/Android/i),p=/PhantomJS/i.test(navigator.userAgent),q=o||p;c.protocol=3;var r=c.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},s=i(r),t={type:"error",data:"parser error"},u=a("blob");c.encodePacket=function(a,c,f,h){"function"==typeof c&&(h=c,c=!1),"function"==typeof f&&(h=f,f=null);var i=void 0===a.data?void 0:a.data.buffer||a.data;if(b.ArrayBuffer&&i instanceof ArrayBuffer)return e(a,c,h);if(u&&i instanceof b.Blob)return g(a,c,h);if(i&&i.base64)return d(a,h);var j=r[a.type];return void 0!==a.data&&(j+=f?n.encode(String(a.data)):String(a.data)),h(""+j)},c.encodeBase64Packet=function(a,d){var e="b"+c.packets[a.type];if(u&&a.data instanceof u){var f=new FileReader;return f.onload=function(){var a=f.result.split(",")[1];d(e+a)},f.readAsDataURL(a.data)}var g;try{g=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(h){for(var i=new Uint8Array(a.data),j=new Array(i.length),k=0;k<i.length;k++)j[k]=i[k];g=String.fromCharCode.apply(null,j)}return e+=b.btoa(g),d(e)},c.decodePacket=function(a,b,d){if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return c.decodeBase64Packet(a.substr(1),b);if(d)try{a=n.decode(a)}catch(e){return t}var f=a.charAt(0);return Number(f)==f&&s[f]?a.length>1?{type:s[f],data:a.substring(1)}:{type:s[f]}:t}var g=new Uint8Array(a),f=g[0],h=k(a,1);return u&&"blob"===b&&(h=new u([h])),{type:s[f],data:h}},c.decodeBase64Packet=function(a,c){var d=s[a.charAt(0)];if(!b.ArrayBuffer)return{type:d,data:{base64:!0,data:a.substr(1)}};var e=l.decode(a.substr(1));return"blob"===c&&u&&(e=new u([e])),{type:d,data:e}},c.encodePayload=function(a,b,d){function e(a){return a.length+":"+a}function f(a,d){c.encodePacket(a,g?b:!1,!0,function(a){d(null,e(a))})}"function"==typeof b&&(d=b,b=null);var g=j(a);return b&&g?u&&!q?c.encodePayloadAsBlob(a,d):c.encodePayloadAsArrayBuffer(a,d):a.length?void h(a,f,function(a,b){return d(b.join(""))}):d("0:")},c.decodePayload=function(a,b,d){if("string"!=typeof a)return c.decodePayloadAsBinary(a,b,d);"function"==typeof b&&(d=b,b=null);var e;if(""==a)return d(t,0,1);for(var f,g,h="",i=0,j=a.length;j>i;i++){var k=a.charAt(i);if(":"!=k)h+=k;else{if(""==h||h!=(f=Number(h)))return d(t,0,1);if(g=a.substr(i+1,f),h!=g.length)return d(t,0,1);if(g.length){if(e=c.decodePacket(g,b,!0),t.type==e.type&&t.data==e.data)return d(t,0,1);var l=d(e,i+f,j);if(!1===l)return}i+=f,h=""}}return""!=h?d(t,0,1):void 0},c.encodePayloadAsArrayBuffer=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){return b(null,a)})}return a.length?void h(a,d,function(a,c){var d=c.reduce(function(a,b){var c;return c="string"==typeof b?b.length:b.byteLength,a+c.toString().length+c+2},0),e=new Uint8Array(d),f=0;return c.forEach(function(a){var b="string"==typeof a,c=a;if(b){for(var d=new Uint8Array(a.length),g=0;g<a.length;g++)d[g]=a.charCodeAt(g);c=d.buffer}b?e[f++]=0:e[f++]=1;for(var h=c.byteLength.toString(),g=0;g<h.length;g++)e[f++]=parseInt(h[g]);e[f++]=255;for(var d=new Uint8Array(c),g=0;g<d.length;g++)e[f++]=d[g]}),b(e.buffer)}):b(new ArrayBuffer(0))},c.encodePayloadAsBlob=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){var c=new Uint8Array(1);if(c[0]=1,"string"==typeof a){for(var d=new Uint8Array(a.length),e=0;e<a.length;e++)d[e]=a.charCodeAt(e);a=d.buffer,c[0]=0}for(var f=a instanceof ArrayBuffer?a.byteLength:a.size,g=f.toString(),h=new Uint8Array(g.length+1),e=0;e<g.length;e++)h[e]=parseInt(g[e]);if(h[g.length]=255,u){var i=new u([c.buffer,h.buffer,a]);b(null,i)}})}h(a,d,function(a,c){return b(new u(c))})},c.decodePayloadAsBinary=function(a,b,d){"function"==typeof b&&(d=b,b=null);for(var e=a,f=[],g=!1;e.byteLength>0;){for(var h=new Uint8Array(e),i=0===h[0],j="",l=1;255!=h[l];l++){if(j.length>310){g=!0;break}j+=h[l]}if(g)return d(t,0,1);e=k(e,2+j.length),j=parseInt(j);var m=k(e,0,j);if(i)try{m=String.fromCharCode.apply(null,new Uint8Array(m))}catch(n){var o=new Uint8Array(m);m="";for(var l=0;l<o.length;l++)m+=String.fromCharCode(o[l])}f.push(m),e=k(e,j)}var p=f.length;f.forEach(function(a,e){d(c.decodePacket(a,b,!0),e,p)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":38,after:14,"arraybuffer.slice":15,"base64-arraybuffer":17,blob:18,"has-binary":59,utf8:82}],38:[function(a,b,c){b.exports=Object.keys||function(a){var b=[],c=Object.prototype.hasOwnProperty;for(var d in a)c.call(a,d)&&b.push(d);return b}},{}],39:[function(a,b,c){"use strict";b.exports=new Function("return this")()},{}],40:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Object.assign:a("./shim")},{"./is-implemented":41,"./shim":42}],41:[function(a,b,c){"use strict";b.exports=function(){var a,b=Object.assign;return"function"!=typeof b?!1:(a={foo:"raz"},b(a,{bar:"dwa"},{trzy:"trzy"}),a.foo+a.bar+a.trzy==="razdwatrzy")}},{}],42:[function(a,b,c){"use strict";var d=a("../keys"),e=a("../valid-value"),f=Math.max;b.exports=function(a,b){var c,g,h,i=f(arguments.length,2);for(a=Object(e(a)),h=function(d){try{a[d]=b[d]}catch(e){c||(c=e)}},g=1;i>g;++g)b=arguments[g],d(b).forEach(h);if(void 0!==c)throw c;return a}},{"../keys":44,"../valid-value":48}],43:[function(a,b,c){"use strict";b.exports=function(a){return"function"==typeof a}},{}],44:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Object.keys:a("./shim")},{"./is-implemented":45,"./shim":46}],45:[function(a,b,c){"use strict";b.exports=function(){try{return Object.keys("primitive"),!0}catch(a){return!1}}},{}],46:[function(a,b,c){"use strict";var d=Object.keys;b.exports=function(a){return d(null==a?a:Object(a))}},{}],47:[function(a,b,c){"use strict";var d=Array.prototype.forEach,e=Object.create,f=function(a,b){var c;for(c in a)b[c]=a[c]};b.exports=function(a){var b=e(null);return d.call(arguments,function(a){null!=a&&f(Object(a),b)}),b}},{}],48:[function(a,b,c){"use strict";b.exports=function(a){if(null==a)throw new TypeError("Cannot use null or undefined");return a}},{}],49:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?String.prototype.contains:a("./shim")},{"./is-implemented":50,"./shim":51}],50:[function(a,b,c){"use strict";var d="razdwatrzy";b.exports=function(){return"function"!=typeof d.contains?!1:d.contains("dwa")===!0&&d.contains("foo")===!1}},{}],51:[function(a,b,c){"use strict";var d=String.prototype.indexOf;b.exports=function(a){return d.call(this,a,arguments[1])>-1}},{}],52:[function(a,b,c){(function(c,d){(function(){"use strict";function e(a){return"function"==typeof a||"object"==typeof a&&null!==a}function f(a){return"function"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){T=a}function i(a){X=a}function j(){return function(){c.nextTick(o)}}function k(){return function(){S(o)}}function l(){var a=0,b=new $(o),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function m(){var a=new MessageChannel;return a.port1.onmessage=o,function(){a.port2.postMessage(0)}}function n(){return function(){setTimeout(o,1)}}function o(){for(var a=0;W>a;a+=2){var b=ba[a],c=ba[a+1];b(c),ba[a]=void 0,ba[a+1]=void 0}W=0}function p(){try{var b=a,c=b("vertx");return S=c.runOnLoop||c.runOnContext,k()}catch(d){return n()}}function q(){}function r(){return new TypeError("You cannot resolve a promise with itself")}function s(){return new TypeError("A promises callback cannot return that same promise.")}function t(a){try{return a.then}catch(b){return fa.error=b,fa}}function u(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function v(a,b,c){X(function(a){var d=!1,e=u(c,b,function(c){d||(d=!0,b!==c?y(a,c):A(a,c))},function(b){d||(d=!0,B(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,B(a,e))},a)}function w(a,b){b._state===da?A(a,b._result):b._state===ea?B(a,b._result):C(b,void 0,function(b){y(a,b)},function(b){B(a,b)})}function x(a,b){if(b.constructor===a.constructor)w(a,b);else{var c=t(b);c===fa?B(a,fa.error):void 0===c?A(a,b):f(c)?v(a,b,c):A(a,b)}}function y(a,b){a===b?B(a,r()):e(b)?x(a,b):A(a,b)}function z(a){a._onerror&&a._onerror(a._result),D(a)}function A(a,b){a._state===ca&&(a._result=b,a._state=da,0!==a._subscribers.length&&X(D,a))}function B(a,b){a._state===ca&&(a._state=ea,a._result=b,X(z,a))}function C(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+da]=c,e[f+ea]=d,0===f&&a._state&&X(D,a)}function D(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?G(c,d,e,f):e(f);a._subscribers.length=0}}function E(){this.error=null}function F(a,b){try{return a(b)}catch(c){return ga.error=c,ga}}function G(a,b,c,d){var e,g,h,i,j=f(c);if(j){if(e=F(c,d),e===ga?(i=!0,g=e.error,e=null):h=!0,b===e)return void B(b,s())}else e=d,h=!0;b._state!==ca||(j&&h?y(b,e):i?B(b,g):a===da?A(b,e):a===ea&&B(b,e))}function H(a,b){try{b(function(b){y(a,b)},function(b){B(a,b)})}catch(c){B(a,c)}}function I(a,b){var c=this;c._instanceConstructor=a,c.promise=new a(q),c._validateInput(b)?(c._input=b,c.length=b.length,c._remaining=b.length,c._init(),0===c.length?A(c.promise,c._result):(c.length=c.length||0,c._enumerate(),0===c._remaining&&A(c.promise,c._result))):B(c.promise,c._validationError())}function J(a){return new ha(this,a).promise}function K(a){function b(a){y(e,a)}function c(a){B(e,a)}var d=this,e=new d(q);if(!V(a))return B(e,new TypeError("You must pass an array to race.")),e;for(var f=a.length,g=0;e._state===ca&&f>g;g++)C(d.resolve(a[g]),void 0,b,c);return e}function L(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(q);return y(c,a),c}function M(a){var b=this,c=new b(q);return B(c,a),c}function N(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function O(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function P(a){this._id=ma++,this._state=void 0,this._result=void 0,this._subscribers=[],q!==a&&(f(a)||N(),this instanceof P||O(),H(this,a))}function Q(){var a;if("undefined"!=typeof d)a=d;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(b){throw new Error("polyfill failed because global object is unavailable in this environment")}var c=a.Promise;(!c||"[object Promise]"!==Object.prototype.toString.call(c.resolve())||c.cast)&&(a.Promise=na)}var R;R=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var S,T,U,V=R,W=0,X=({}.toString,function(a,b){ba[W]=a,ba[W+1]=b,W+=2,2===W&&(T?T(o):U())}),Y="undefined"!=typeof window?window:void 0,Z=Y||{},$=Z.MutationObserver||Z.WebKitMutationObserver,_="undefined"!=typeof c&&"[object process]"==={}.toString.call(c),aa="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ba=new Array(1e3);U=_?j():$?l():aa?m():void 0===Y&&"function"==typeof a?p():n();var ca=void 0,da=1,ea=2,fa=new E,ga=new E;I.prototype._validateInput=function(a){return V(a)},I.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},I.prototype._init=function(){this._result=new Array(this.length)};var ha=I;I.prototype._enumerate=function(){for(var a=this,b=a.length,c=a.promise,d=a._input,e=0;c._state===ca&&b>e;e++)a._eachEntry(d[e],e)},I.prototype._eachEntry=function(a,b){var c=this,d=c._instanceConstructor;g(a)?a.constructor===d&&a._state!==ca?(a._onerror=null,c._settledAt(a._state,b,a._result)):c._willSettleAt(d.resolve(a),b):(c._remaining--,c._result[b]=a)},I.prototype._settledAt=function(a,b,c){var d=this,e=d.promise;e._state===ca&&(d._remaining--,a===ea?B(e,c):d._result[b]=c),0===d._remaining&&A(e,d._result)},I.prototype._willSettleAt=function(a,b){var c=this;C(a,void 0,function(a){c._settledAt(da,b,a)},function(a){c._settledAt(ea,b,a)})};var ia=J,ja=K,ka=L,la=M,ma=0,na=P;P.all=ia,P.race=ja,P.resolve=ka,P.reject=la,P._setScheduler=h,P._setAsap=i,P._asap=X,P.prototype={constructor:P,then:function(a,b){var c=this,d=c._state;if(d===da&&!a||d===ea&&!b)return this;var e=new this.constructor(q),f=c._result;if(d){var g=arguments[d-1];X(function(){G(d,e,g,f)})}else C(c,e,a,b);return e},"catch":function(a){return this.then(null,a)}};var oa=Q,pa={Promise:na,polyfill:oa};"function"==typeof define&&define.amd?define(function(){return pa}):"undefined"!=typeof b&&b.exports?b.exports=pa:"undefined"!=typeof this&&(this.ES6Promise=pa),oa()}).call(this)}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:69}],53:[function(a,b,c){"use strict";a("./is-implemented")()||Object.defineProperty(a("es5-ext/global"),"Symbol",{value:a("./polyfill"),configurable:!0,enumerable:!1,writable:!0})},{"./is-implemented":54,"./polyfill":56,"es5-ext/global":39}],54:[function(a,b,c){"use strict";b.exports=function(){var a;if("function"!=typeof Symbol)return!1;a=Symbol("test symbol");try{String(a)}catch(b){return!1}return"symbol"==typeof Symbol.iterator?!0:"object"!=typeof Symbol.isConcatSpreadable?!1:"object"!=typeof Symbol.iterator?!1:"object"!=typeof Symbol.toPrimitive?!1:"object"!=typeof Symbol.toStringTag?!1:"object"!=typeof Symbol.unscopables?!1:!0}},{}],55:[function(a,b,c){"use strict";b.exports=function(a){return a&&("symbol"==typeof a||"Symbol"===a["@@toStringTag"])||!1}},{}],56:[function(a,b,c){"use strict";var d,e,f,g=a("d"),h=a("./validate-symbol"),i=Object.create,j=Object.defineProperties,k=Object.defineProperty,l=Object.prototype,m=i(null);"function"==typeof Symbol&&(d=Symbol);var n=function(){var a=i(null);return function(b){for(var c,d,e=0;a[b+(e||"")];)++e;return b+=e||"",a[b]=!0,c="@@"+b,k(l,c,g.gs(null,function(a){d||(d=!0,k(this,c,g(a)),d=!1)})),c}}();f=function(a){if(this instanceof f)throw new TypeError("TypeError: Symbol is not a constructor");return e(a)},b.exports=e=function o(a){var b;if(this instanceof o)throw new TypeError("TypeError: Symbol is not a constructor");return b=i(f.prototype),a=void 0===a?"":String(a),j(b,{__description__:g("",a),__name__:g("",n(a))})},j(e,{"for":g(function(a){return m[a]?m[a]:m[a]=e(String(a))}),keyFor:g(function(a){var b;h(a);for(b in m)if(m[b]===a)return b}),hasInstance:g("",d&&d.hasInstance||e("hasInstance")),isConcatSpreadable:g("",d&&d.isConcatSpreadable||e("isConcatSpreadable")),iterator:g("",d&&d.iterator||e("iterator")),match:g("",d&&d.match||e("match")),replace:g("",d&&d.replace||e("replace")),search:g("",d&&d.search||e("search")),species:g("",d&&d.species||e("species")),split:g("",d&&d.split||e("split")),toPrimitive:g("",d&&d.toPrimitive||e("toPrimitive")),toStringTag:g("",d&&d.toStringTag||e("toStringTag")),unscopables:g("",d&&d.unscopables||e("unscopables"))}),j(f.prototype,{constructor:g(e),toString:g("",function(){return this.__name__})}),j(e.prototype,{toString:g(function(){return"Symbol ("+h(this).__description__+")"}),valueOf:g(function(){return h(this)})}),k(e.prototype,e.toPrimitive,g("",function(){return h(this)})),k(e.prototype,e.toStringTag,g("c","Symbol")),k(f.prototype,e.toStringTag,g("c",e.prototype[e.toStringTag])),k(f.prototype,e.toPrimitive,g("c",e.prototype[e.toPrimitive]))},{"./validate-symbol":57,d:22}],57:[function(a,b,c){"use strict";var d=a("./is-symbol");b.exports=function(a){if(!d(a))throw new TypeError(a+" is not a symbol");return a}},{"./is-symbol":55}],58:[function(a,b,c){b.exports=function(){return this}()},{}],59:[function(a,b,c){(function(c){function d(a){function b(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a)){for(var d=0;d<a.length;d++)if(b(a[d]))return!0}else if(a&&"object"==typeof a){a.toJSON&&(a=a.toJSON());for(var f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&b(a[f]))return!0}return!1}return b(a)}var e=a("isarray");b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:62}],60:[function(a,b,c){var d=a("global");try{b.exports="XMLHttpRequest"in d&&"withCredentials"in new d.XMLHttpRequest}catch(e){b.exports=!1}},{global:58}],61:[function(a,b,c){var d=[].indexOf;b.exports=function(a,b){if(d)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}},{}],62:[function(a,b,c){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],63:[function(a,b,c){!function(a){function b(a){if(b[a]!==f)return b[a];var c;if("bug-string-char-index"==a)c="a"!="a"[0];else if("json"==a)c=b("json-stringify")&&b("json-parse");else{var d,e='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==a){var h=j.stringify,i="function"==typeof h&&k;if(i){(d=function(){return 1}).toJSON=d;try{i="0"===h(0)&&"0"===h(new Number)&&'""'==h(new String)&&h(g)===f&&h(f)===f&&h()===f&&"1"===h(d)&&"[1]"==h([d])&&"[null]"==h([f])&&"null"==h(null)&&"[null,null,null]"==h([f,g,null])&&h({a:[d,!0,!1,null,"\x00\b\n\f\r	"]})==e&&"1"===h(null,d)&&"[\n 1,\n 2\n]"==h([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==h(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==h(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==h(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==h(new Date(-1))}catch(l){i=!1}}c=i}if("json-parse"==a){var m=j.parse;if("function"==typeof m)try{if(0===m("0")&&!m(!1)){d=m(e);var n=5==d.a.length&&1===d.a[0];if(n){try{n=!m('"	"')}catch(l){}if(n)try{n=1!==m("01")}catch(l){}if(n)try{n=1!==m("1.")}catch(l){}}}}catch(l){n=!1}c=n}}return b[a]=!!c}var d,e,f,g={}.toString,h="function"==typeof define&&define.amd,i="object"==typeof JSON&&JSON,j="object"==typeof c&&c&&!c.nodeType&&c;j&&i?(j.stringify=i.stringify,j.parse=i.parse):j=a.JSON=i||{};var k=new Date(-0xc782b5b800cec);try{k=-109252==k.getUTCFullYear()&&0===k.getUTCMonth()&&1===k.getUTCDate()&&10==k.getUTCHours()&&37==k.getUTCMinutes()&&6==k.getUTCSeconds()&&708==k.getUTCMilliseconds()}catch(l){}if(!b("json")){var m="[object Function]",n="[object Date]",o="[object Number]",p="[object String]",q="[object Array]",r="[object Boolean]",s=b("bug-string-char-index");if(!k)var t=Math.floor,u=[0,31,59,90,120,151,181,212,243,273,304,334],v=function(a,b){return u[b]+365*(a-1970)+t((a-1969+(b=+(b>1)))/4)-t((a-1901+b)/100)+t((a-1601+b)/400)};(d={}.hasOwnProperty)||(d=function(a){var b,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=g?d=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(b=c.constructor,d=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,d.call(this,a)});var w={"boolean":1,number:1,string:1,undefined:1},x=function(a,b){var c=typeof a[b];return"object"==c?!!a[b]:!w[c]};if(e=function(a,b){var c,f,h,i=0;(c=function(){this.valueOf=0}).prototype.valueOf=0,f=new c;for(h in f)d.call(f,h)&&i++;return c=f=null,i?e=2==i?function(a,b){var c,e={},f=g.call(a)==m;for(c in a)f&&"prototype"==c||d.call(e,c)||!(e[c]=1)||!d.call(a,c)||b(c)}:function(a,b){var c,e,f=g.call(a)==m;for(c in a)f&&"prototype"==c||!d.call(a,c)||(e="constructor"===c)||b(c);(e||d.call(a,c="constructor"))&&b(c)}:(f=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],e=function(a,b){var c,e,h=g.call(a)==m,i=!h&&"function"!=typeof a.constructor&&x(a,"hasOwnProperty")?a.hasOwnProperty:d;for(c in a)h&&"prototype"==c||!i.call(a,c)||b(c);for(e=f.length;c=f[--e];i.call(a,c)&&b(c));}),e(a,b)},!b("json-stringify")){var y={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},z="000000",A=function(a,b){return(z+(b||0)).slice(-a)},B="\\u00",C=function(a){var b,c='"',d=0,e=a.length,f=e>10&&s;for(f&&(b=a.split(""));e>d;d++){var g=a.charCodeAt(d);switch(g){case 8:case 9:case 10:case 12:case 13:case 34:case 92:c+=y[g];break;default:if(32>g){c+=B+A(2,g.toString(16));break}c+=f?b[d]:s?a.charAt(d):a[d]}}return c+'"'},D=function(a,b,c,h,i,j,k){var l,m,s,u,w,x,y,z,B,E,F,G,H,I,J,K;try{l=b[a]}catch(L){}if("object"==typeof l&&l)if(m=g.call(l),m!=n||d.call(l,"toJSON"))"function"==typeof l.toJSON&&(m!=o&&m!=p&&m!=q||d.call(l,"toJSON"))&&(l=l.toJSON(a));else if(l>-1/0&&1/0>l){if(v){for(w=t(l/864e5),s=t(w/365.2425)+1970-1;v(s+1,0)<=w;s++);for(u=t((w-v(s,0))/30.42);v(s,u+1)<=w;u++);w=1+w-v(s,u),x=(l%864e5+864e5)%864e5,y=t(x/36e5)%24,z=t(x/6e4)%60,B=t(x/1e3)%60,E=x%1e3}else s=l.getUTCFullYear(),u=l.getUTCMonth(),w=l.getUTCDate(),y=l.getUTCHours(),z=l.getUTCMinutes(),B=l.getUTCSeconds(),E=l.getUTCMilliseconds();l=(0>=s||s>=1e4?(0>s?"-":"+")+A(6,0>s?-s:s):A(4,s))+"-"+A(2,u+1)+"-"+A(2,w)+"T"+A(2,y)+":"+A(2,z)+":"+A(2,B)+"."+A(3,E)+"Z"}else l=null;if(c&&(l=c.call(b,a,l)),null===l)return"null";if(m=g.call(l),m==r)return""+l;if(m==o)return l>-1/0&&1/0>l?""+l:"null";if(m==p)return C(""+l);if("object"==typeof l){for(I=k.length;I--;)if(k[I]===l)throw TypeError();if(k.push(l),F=[],J=j,j+=i,m==q){for(H=0,I=l.length;I>H;H++)G=D(H,l,c,h,i,j,k),F.push(G===f?"null":G);K=F.length?i?"[\n"+j+F.join(",\n"+j)+"\n"+J+"]":"["+F.join(",")+"]":"[]"}else e(h||l,function(a){var b=D(a,l,c,h,i,j,k);b!==f&&F.push(C(a)+":"+(i?" ":"")+b)}),K=F.length?i?"{\n"+j+F.join(",\n"+j)+"\n"+J+"}":"{"+F.join(",")+"}":"{}";return k.pop(),K}};j.stringify=function(a,b,c){var d,e,f,h;if("function"==typeof b||"object"==typeof b&&b)if((h=g.call(b))==m)e=b;else if(h==q){f={};for(var i,j=0,k=b.length;k>j;i=b[j++],h=g.call(i),(h==p||h==o)&&(f[i]=1));}if(c)if((h=g.call(c))==o){if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else h==p&&(d=c.length<=10?c:c.slice(0,10));return D("",(i={},i[""]=a,i),e,f,d,"",[])}}if(!b("json-parse")){var E,F,G=String.fromCharCode,H={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},I=function(){throw E=F=null,SyntaxError()},J=function(){for(var a,b,c,d,e,f=F,g=f.length;g>E;)switch(e=f.charCodeAt(E)){case 9:case 10:case 13:case 32:E++;break;case 123:case 125:case 91:case 93:case 58:case 44:return a=s?f.charAt(E):f[E],E++,a;case 34:for(a="@",E++;g>E;)if(e=f.charCodeAt(E),32>e)I();else if(92==e)switch(e=f.charCodeAt(++E)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=H[e],E++;break;case 117:for(b=++E,c=E+4;c>E;E++)e=f.charCodeAt(E),e>=48&&57>=e||e>=97&&102>=e||e>=65&&70>=e||I();a+=G("0x"+f.slice(b,E));break;default:I()}else{if(34==e)break;for(e=f.charCodeAt(E),b=E;e>=32&&92!=e&&34!=e;)e=f.charCodeAt(++E);a+=f.slice(b,E)}if(34==f.charCodeAt(E))return E++,a;I();default:if(b=E,45==e&&(d=!0,e=f.charCodeAt(++E)),e>=48&&57>=e){for(48==e&&(e=f.charCodeAt(E+1),e>=48&&57>=e)&&I(),d=!1;g>E&&(e=f.charCodeAt(E),e>=48&&57>=e);E++);if(46==f.charCodeAt(E)){for(c=++E;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==E&&I(),E=c}if(e=f.charCodeAt(E),101==e||69==e){for(e=f.charCodeAt(++E),(43==e||45==e)&&E++,c=E;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==E&&I(),E=c}return+f.slice(b,E)}if(d&&I(),"true"==f.slice(E,E+4))return E+=4,!0;if("false"==f.slice(E,E+5))return E+=5,!1;if("null"==f.slice(E,E+4))return E+=4,null;I()}return"$"},K=function(a){var b,c;if("$"==a&&I(),"string"==typeof a){if("@"==(s?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];a=J(),"]"!=a;c||(c=!0))c&&(","==a?(a=J(),"]"==a&&I()):I()),","==a&&I(),b.push(K(a));return b}if("{"==a){for(b={};a=J(),"}"!=a;c||(c=!0))c&&(","==a?(a=J(),"}"==a&&I()):I()),(","==a||"string"!=typeof a||"@"!=(s?a.charAt(0):a[0])||":"!=J())&&I(),b[a.slice(1)]=K(J());return b}I()}return a},L=function(a,b,c){var d=M(a,b,c);d===f?delete a[b]:a[b]=d},M=function(a,b,c){var d,f=a[b];if("object"==typeof f&&f)if(g.call(f)==q)for(d=f.length;d--;)L(f,d,c);else e(f,function(a){L(f,a,c)});return c.call(a,b,f)};j.parse=function(a,b){var c,d;return E=0,F=""+a,c=K(J()),"$"!=J()&&I(),E=F=null,b&&g.call(b)==m?M((d={},d[""]=c,d),"",b):c}}}h&&define(function(){return j})}(this)},{}],64:[function(a,b,c){window.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||function(a){function b(a){this.g=[],this.k=a}function c(a){!function c(){var d=a.takeRecords();d.length&&a.k(d,a),a.f=setTimeout(c,b._period)}()}function d(b){var c,d={type:null,target:null,addedNodes:[],removedNodes:[],previousSibling:null,nextSibling:null,attributeName:null,attributeNamespace:null,oldValue:null};for(c in b)d[c]!==a&&b[c]!==a&&(d[c]=b[c]);return d}function e(a,b){var c=h(a,b);return function(d){var e,i=d.length;b.a&&c.a&&f(d,a,c.a,b.d),(b.b||b.e)&&(e=g(d,a,c,b)),(e||d.length!==i)&&(c=h(a,b))}}function f(b,c,e,f){for(var g,h,i={},j=c.attributes,k=j.length;k--;)g=j[k],h=g.name,f&&f[h]===a||(g.value!==e[h]&&b.push(d({type:"attributes",target:c,attributeName:h,oldValue:e[h],attributeNamespace:g.namespaceURI})),i[h]=!0);for(h in e)i[h]||b.push(d({target:c,type:"attributes",attributeName:h,oldValue:e[h]}))}function g(b,c,e,g){function h(a,c,e,h,i){var k=a.length-1;i=-~((k-i)/2);for(var l,m,n;n=a.pop();)l=e[n.h],m=h[n.i],g.b&&i&&Math.abs(n.h-n.i)>=k&&(b.push(d({type:"childList",target:c,addedNodes:[l],removedNodes:[l],nextSibling:l.nextSibling,previousSibling:l.previousSibling})),i--),g.a&&m.a&&f(b,l,m.a,g.d),g.c&&3===l.nodeType&&l.nodeValue!==m.c&&b.push(d({type:"characterData",target:l})),g.e&&j(l,m)}function j(c,e){for(var m,n,o,p,q,r=c.childNodes,s=e.b,t=r.length,u=s?s.length:0,v=0,w=0,x=0;t>w||u>x;)p=r[w],q=(o=s[x])&&o.j,p===q?(g.a&&o.a&&f(b,p,o.a,g.d),g.c&&o.c!==a&&p.nodeValue!==o.c&&b.push(d({type:"characterData",target:p})),n&&h(n,c,r,s,v),g.e&&(p.childNodes.length||o.b&&o.b.length)&&j(p,o),w++,x++):(k=!0,m||(m={},n=[]),p&&(m[o=i(p)]||(m[o]=!0,-1===(o=l(s,p,x,"j"))?g.b&&(b.push(d({type:"childList",target:c,addedNodes:[p],nextSibling:p.nextSibling,previousSibling:p.previousSibling})),v++):n.push({h:w,i:o})),w++),q&&q!==r[w]&&(m[o=i(q)]||(m[o]=!0,-1===(o=l(r,q,w))?g.b&&(b.push(d({type:"childList",target:e.j,removedNodes:[q],nextSibling:s[x+1],previousSibling:s[x-1]})),v--):n.push({h:o,i:x})),x++));n&&h(n,c,r,s,v)}var k;return j(c,e),k}function h(a,b){var c=!0;return function d(a){var e={j:a};return!b.c||3!==a.nodeType&&8!==a.nodeType?(b.a&&c&&1===a.nodeType&&(e.a=k(a.attributes,function(a,c){return(!b.d||b.d[c.name])&&(a[c.name]=c.value),a})),c&&(b.b||b.c||b.a&&b.e)&&(e.b=j(a.childNodes,d)),c=b.e):e.c=a.nodeValue,e}(a)}function i(a){try{return a.id||(a.mo_id=a.mo_id||m++)}catch(b){try{return a.nodeValue}catch(c){return m++}}}function j(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d,a);return c}function k(a,b){for(var c={},d=0;d<a.length;d++)c=b(c,a[d],d,a);return c}function l(a,b,c,d){for(;c<a.length;c++)if((d?a[c][d]:a[c])===b)return c;return-1}b._period=30,b.prototype={observe:function(a,b){for(var d={a:!!(b.attributes||b.attributeFilter||b.attributeOldValue),b:!!b.childList,e:!!b.subtree,c:!(!b.characterData&&!b.characterDataOldValue)},f=this.g,g=0;g<f.length;g++)f[g].m===a&&f.splice(g,1);b.attributeFilter&&(d.d=k(b.attributeFilter,function(a,b){return a[b]=!0,a})),f.push({m:a,l:e(a,d)}),this.f||c(this)},takeRecords:function(){for(var a=[],b=this.g,c=0;c<b.length;c++)b[c].l(a);return a},disconnect:function(){this.g=[],clearTimeout(this.f),this.f=null}};var m=1;return b}(void 0)},{}],65:[function(a,b,c){var d=Object.prototype.hasOwnProperty;c.keys=Object.keys||function(a){var b=[];for(var c in a)d.call(a,c)&&b.push(c);return b},c.values=function(a){var b=[];for(var c in a)d.call(a,c)&&b.push(a[c]);return b},c.merge=function(a,b){for(var c in b)d.call(b,c)&&(a[c]=b[c]);return a},c.length=function(a){return c.keys(a).length},c.isEmpty=function(a){return 0==c.length(a)}},{}],66:[function(a,b,c){(function(a){var c=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,e=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g,g=/^\s+/,h=/\s+$/;b.exports=function(b){return"string"==typeof b&&b?(b=b.replace(g,"").replace(h,""),a.JSON&&JSON.parse?JSON.parse(b):c.test(b.replace(d,"@").replace(e,"]").replace(f,""))?new Function("return "+b)():void 0):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],67:[function(a,b,c){c.encode=function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b},c.decode=function(a){for(var b={},c=a.split("&"),d=0,e=c.length;e>d;d++){var f=c[d].split("=");b[decodeURIComponent(f[0])]=decodeURIComponent(f[1]);
}return b}},{}],68:[function(a,b,c){var d=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.exports=function(a){for(var b=d.exec(a||""),c={},f=14;f--;)c[e[f]]=b[f]||"";return c}},{}],69:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&&e()}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l<b;)h&&h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],70:[function(a,b,c){b.exports=a("./lib/")},{"./lib/":71}],71:[function(a,b,c){function d(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d=e(a),f=d.source,j=d.id;return b.forceNew||b["force new connection"]||!1===b.multiplex?(h("ignoring socket cache for %s",f),c=g(f,b)):(i[j]||(h("new io instance for %s",f),i[j]=g(f,b)),c=i[j]),c.socket(d.path)}var e=a("./url"),f=a("socket.io-parser"),g=a("./manager"),h=a("debug")("socket.io-client");b.exports=c=d;var i=c.managers={};c.protocol=f.protocol,c.connect=d,c.Manager=a("./manager"),c.Socket=a("./socket")},{"./manager":72,"./socket":74,"./url":75,debug:76,"socket.io-parser":78}],72:[function(a,b,c){function d(a,b){return this instanceof d?(a&&"object"==typeof a&&(b=a,a=void 0),b=b||{},b.path=b.path||"/socket.io",this.nsps={},this.subs=[],this.opts=b,this.reconnection(b.reconnection!==!1),this.reconnectionAttempts(b.reconnectionAttempts||1/0),this.reconnectionDelay(b.reconnectionDelay||1e3),this.reconnectionDelayMax(b.reconnectionDelayMax||5e3),this.randomizationFactor(b.randomizationFactor||.5),this.backoff=new m({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==b.timeout?2e4:b.timeout),this.readyState="closed",this.uri=a,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new h.Encoder,this.decoder=new h.Decoder,this.autoConnect=b.autoConnect!==!1,void(this.autoConnect&&this.open())):new d(a,b)}var e=(a("./url"),a("engine.io-client")),f=a("./socket"),g=a("component-emitter"),h=a("socket.io-parser"),i=a("./on"),j=a("component-bind"),k=(a("object-component"),a("debug")("socket.io-client:manager")),l=a("indexof"),m=a("backo2");b.exports=d,d.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)this.nsps[a].emit.apply(this.nsps[a],arguments)},d.prototype.updateSocketIds=function(){for(var a in this.nsps)this.nsps[a].id=this.engine.id},g(d.prototype),d.prototype.reconnection=function(a){return arguments.length?(this._reconnection=!!a,this):this._reconnection},d.prototype.reconnectionAttempts=function(a){return arguments.length?(this._reconnectionAttempts=a,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(a){return arguments.length?(this._reconnectionDelay=a,this.backoff&&this.backoff.setMin(a),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(a){return arguments.length?(this._randomizationFactor=a,this.backoff&&this.backoff.setJitter(a),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(a){return arguments.length?(this._reconnectionDelayMax=a,this.backoff&&this.backoff.setMax(a),this):this._reconnectionDelayMax},d.prototype.timeout=function(a){return arguments.length?(this._timeout=a,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(a){if(k("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;k("opening %s",this.uri),this.engine=e(this.uri,this.opts);var b=this.engine,c=this;this.readyState="opening",this.skipReconnect=!1;var d=i(b,"open",function(){c.onopen(),a&&a()}),f=i(b,"error",function(b){if(k("connect_error"),c.cleanup(),c.readyState="closed",c.emitAll("connect_error",b),a){var d=new Error("Connection error");d.data=b,a(d)}else c.maybeReconnectOnOpen()});if(!1!==this._timeout){var g=this._timeout;k("connect attempt will timeout after %d",g);var h=setTimeout(function(){k("connect attempt timed out after %d",g),d.destroy(),b.close(),b.emit("error","timeout"),c.emitAll("connect_timeout",g)},g);this.subs.push({destroy:function(){clearTimeout(h)}})}return this.subs.push(d),this.subs.push(f),this},d.prototype.onopen=function(){k("open"),this.cleanup(),this.readyState="open",this.emit("open");var a=this.engine;this.subs.push(i(a,"data",j(this,"ondata"))),this.subs.push(i(this.decoder,"decoded",j(this,"ondecoded"))),this.subs.push(i(a,"error",j(this,"onerror"))),this.subs.push(i(a,"close",j(this,"onclose")))},d.prototype.ondata=function(a){this.decoder.add(a)},d.prototype.ondecoded=function(a){this.emit("packet",a)},d.prototype.onerror=function(a){k("error",a),this.emitAll("error",a)},d.prototype.socket=function(a){var b=this.nsps[a];if(!b){b=new f(this,a),this.nsps[a]=b;var c=this;b.on("connect",function(){b.id=c.engine.id,~l(c.connected,b)||c.connected.push(b)})}return b},d.prototype.destroy=function(a){var b=l(this.connected,a);~b&&this.connected.splice(b,1),this.connected.length||this.close()},d.prototype.packet=function(a){k("writing packet %j",a);var b=this;b.encoding?b.packetBuffer.push(a):(b.encoding=!0,this.encoder.encode(a,function(a){for(var c=0;c<a.length;c++)b.engine.write(a[c]);b.encoding=!1,b.processPacketQueue()}))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}},d.prototype.cleanup=function(){for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(a){k("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",a),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var a=this;if(this.backoff.attempts>=this._reconnectionAttempts)k("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var b=this.backoff.duration();k("will wait %dms before reconnect attempt",b),this.reconnecting=!0;var c=setTimeout(function(){a.skipReconnect||(k("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open(function(b){b?(k("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(k("reconnect success"),a.onreconnect())}))},b);this.subs.push({destroy:function(){clearTimeout(c)}})}},d.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",a)}},{"./on":73,"./socket":74,"./url":75,backo2:16,"component-bind":19,"component-emitter":20,debug:76,"engine.io-client":23,indexof:61,"object-component":65,"socket.io-parser":78}],73:[function(a,b,c){function d(a,b,c){return a.on(b,c),{destroy:function(){a.removeListener(b,c)}}}b.exports=d},{}],74:[function(a,b,c){function d(a,b){this.io=a,this.nsp=b,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var e=a("socket.io-parser"),f=a("component-emitter"),g=a("to-array"),h=a("./on"),i=a("component-bind"),j=a("debug")("socket.io-client:socket"),k=a("has-binary");b.exports=c=d;var l={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},m=f.prototype.emit;f(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=[h(a,"open",i(this,"onopen")),h(a,"packet",i(this,"onpacket")),h(a,"close",i(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},d.prototype.send=function(){var a=g(arguments);return a.unshift("message"),this.emit.apply(this,a),this},d.prototype.emit=function(a){if(l.hasOwnProperty(a))return m.apply(this,arguments),this;var b=g(arguments),c=e.EVENT;k(b)&&(c=e.BINARY_EVENT);var d={type:c,data:b};return"function"==typeof b[b.length-1]&&(j("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),d.id=this.ids++),this.connected?this.packet(d):this.sendBuffer.push(d),this},d.prototype.packet=function(a){a.nsp=this.nsp,this.io.packet(a)},d.prototype.onopen=function(){j("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:e.CONNECT})},d.prototype.onclose=function(a){j("close (%s)",a),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",a)},d.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case e.CONNECT:this.onconnect();break;case e.EVENT:this.onevent(a);break;case e.BINARY_EVENT:this.onevent(a);break;case e.ACK:this.onack(a);break;case e.BINARY_ACK:this.onack(a);break;case e.DISCONNECT:this.ondisconnect();break;case e.ERROR:this.emit("error",a.data)}},d.prototype.onevent=function(a){var b=a.data||[];j("emitting event %j",b),null!=a.id&&(j("attaching ack callback to event"),b.push(this.ack(a.id))),this.connected?m.apply(this,b):this.receiveBuffer.push(b)},d.prototype.ack=function(a){var b=this,c=!1;return function(){if(!c){c=!0;var d=g(arguments);j("sending ack %j",d);var f=k(d)?e.BINARY_ACK:e.ACK;b.packet({type:f,id:a,data:d})}}},d.prototype.onack=function(a){j("calling ack %s with %j",a.id,a.data);var b=this.acks[a.id];b.apply(this,a.data),delete this.acks[a.id]},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)m.apply(this,this.receiveBuffer[a]);for(this.receiveBuffer=[],a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){j("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(j("performing disconnect (%s)",this.nsp),this.packet({type:e.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":73,"component-bind":19,"component-emitter":20,debug:76,"has-binary":59,"socket.io-parser":78,"to-array":81}],75:[function(a,b,c){(function(c){function d(a,b){var d=a,b=b||c.location;return null==a&&(a=b.protocol+"//"+b.host),"string"==typeof a&&("/"==a.charAt(0)&&(a="/"==a.charAt(1)?b.protocol+a:b.hostname+a),/^(https?|wss?):\/\//.test(a)||(f("protocol-less url %s",a),a="undefined"!=typeof b?b.protocol+"//"+a:"https://"+a),f("parse %s",a),d=e(a)),d.port||(/^(http|ws)$/.test(d.protocol)?d.port="80":/^(http|ws)s$/.test(d.protocol)&&(d.port="443")),d.path=d.path||"/",d.id=d.protocol+"://"+d.host+":"+d.port,d.href=d.protocol+"://"+d.host+(b&&b.port==d.port?"":":"+d.port),d}var e=a("parseuri"),f=a("debug")("socket.io-client:url");b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:76,parseuri:68}],76:[function(a,b,c){function d(a){return d.enabled(a)?function(b){b=e(b);var c=new Date,f=c-(d[a]||c);d[a]=c,b=a+" "+b+" +"+d.humanize(f),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function e(a){return a instanceof Error?a.stack||a.message:a}b.exports=d,d.names=[],d.skips=[],d.enable=function(a){try{localStorage.debug=a}catch(b){}for(var c=(a||"").split(/[\s,]+/),e=c.length,f=0;e>f;f++)a=c[f].replace("*",".*?"),"-"===a[0]?d.skips.push(new RegExp("^"+a.substr(1)+"$")):d.names.push(new RegExp("^"+a+"$"))},d.disable=function(){d.enable("")},d.humanize=function(a){var b=1e3,c=6e4,d=60*c;return a>=d?(a/d).toFixed(1)+"h":a>=c?(a/c).toFixed(1)+"m":a>=b?(a/b|0)+"s":a+"ms"},d.enabled=function(a){for(var b=0,c=d.skips.length;c>b;b++)if(d.skips[b].test(a))return!1;for(var b=0,c=d.names.length;c>b;b++)if(d.names[b].test(a))return!0;return!1};try{window.localStorage&&d.enable(localStorage.debug)}catch(f){}},{}],77:[function(a,b,c){(function(b){var d=a("isarray"),e=a("./is-buffer");c.deconstructPacket=function(a){function b(a){if(!a)return a;if(e(a)){var f={_placeholder:!0,num:c.length};return c.push(a),f}if(d(a)){for(var g=new Array(a.length),h=0;h<a.length;h++)g[h]=b(a[h]);return g}if("object"==typeof a&&!(a instanceof Date)){var g={};for(var i in a)g[i]=b(a[i]);return g}return a}var c=[],f=a.data,g=a;return g.data=b(f),g.attachments=c.length,{packet:g,buffers:c}},c.reconstructPacket=function(a,b){function c(a){if(a&&a._placeholder){var e=b[a.num];return e}if(d(a)){for(var f=0;f<a.length;f++)a[f]=c(a[f]);return a}if(a&&"object"==typeof a){for(var g in a)a[g]=c(a[g]);return a}return a}return a.data=c(a.data),a.attachments=void 0,a},c.removeBlobs=function(a,c){function f(a,i,j){if(!a)return a;if(b.Blob&&a instanceof Blob||b.File&&a instanceof File){g++;var k=new FileReader;k.onload=function(){j?j[i]=this.result:h=this.result,--g||c(h)},k.readAsArrayBuffer(a)}else if(d(a))for(var l=0;l<a.length;l++)f(a[l],l,a);else if(a&&"object"==typeof a&&!e(a))for(var m in a)f(a[m],m,a)}var g=0,h=a;f(h),g||c(h)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":79,isarray:62}],78:[function(a,b,c){function d(){}function e(a){var b="",d=!1;return b+=a.type,(c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)&&(b+=a.attachments,b+="-"),a.nsp&&"/"!=a.nsp&&(d=!0,b+=a.nsp),null!=a.id&&(d&&(b+=",",d=!1),b+=a.id),null!=a.data&&(d&&(b+=","),b+=l.stringify(a.data)),k("encoded %j as %s",a,b),b}function f(a,b){function c(a){var c=n.deconstructPacket(a),d=e(c.packet),f=c.buffers;f.unshift(d),b(f)}n.removeBlobs(a,c)}function g(){this.reconstructor=null}function h(a){var b={},d=0;if(b.type=Number(a.charAt(0)),null==c.types[b.type])return j();if(c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type){for(var e="";"-"!=a.charAt(++d)&&(e+=a.charAt(d),d!=a.length););if(e!=Number(e)||"-"!=a.charAt(d))throw new Error("Illegal attachments");b.attachments=Number(e)}if("/"==a.charAt(d+1))for(b.nsp="";++d;){var f=a.charAt(d);if(","==f)break;if(b.nsp+=f,d==a.length)break}else b.nsp="/";var g=a.charAt(d+1);if(""!==g&&Number(g)==g){for(b.id="";++d;){var f=a.charAt(d);if(null==f||Number(f)!=f){--d;break}if(b.id+=a.charAt(d),d==a.length)break}b.id=Number(b.id)}if(a.charAt(++d))try{b.data=l.parse(a.substr(d))}catch(h){return j()}return k("decoded %s as %j",a,b),b}function i(a){this.reconPack=a,this.buffers=[]}function j(a){return{type:c.ERROR,data:"parser error"}}var k=a("debug")("socket.io-parser"),l=a("json3"),m=(a("isarray"),a("component-emitter")),n=a("./binary"),o=a("./is-buffer");c.protocol=4,c.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],c.CONNECT=0,c.DISCONNECT=1,c.EVENT=2,c.ACK=3,c.ERROR=4,c.BINARY_EVENT=5,c.BINARY_ACK=6,c.Encoder=d,c.Decoder=g,d.prototype.encode=function(a,b){if(k("encoding packet %j",a),c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)f(a,b);else{var d=e(a);b([d])}},m(g.prototype),g.prototype.add=function(a){var b;if("string"==typeof a)b=h(a),c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type?(this.reconstructor=new i(b),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",b)):this.emit("decoded",b);else{if(!o(a)&&!a.base64)throw new Error("Unknown type: "+a);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");b=this.reconstructor.takeBinaryData(a),b&&(this.reconstructor=null,this.emit("decoded",b))}},g.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},i.prototype.takeBinaryData=function(a){if(this.buffers.push(a),this.buffers.length==this.reconPack.attachments){var b=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),b}return null},i.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":77,"./is-buffer":79,"component-emitter":20,debug:80,isarray:62,json3:63}],79:[function(a,b,c){(function(a){function c(b){return a.Buffer&&a.Buffer.isBuffer(b)||a.ArrayBuffer&&b instanceof ArrayBuffer}b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],80:[function(a,b,c){arguments[4][76][0].apply(c,arguments)},{dup:76}],81:[function(a,b,c){function d(a,b){var c=[];b=b||0;for(var d=b||0;d<a.length;d++)c[d-b]=a[d];return c}b.exports=d},{}],82:[function(a,b,c){(function(a){!function(d){function e(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function f(a){for(var b,c=a.length,d=-1,e="";++d<c;)b=a[d],b>65535&&(b-=65536,e+=t(b>>>10&1023|55296),b=56320|1023&b),e+=t(b);return e}function g(a){if(a>=55296&&57343>=a)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+" is not a scalar value")}function h(a,b){return t(a>>b&63|128)}function i(a){if(0==(4294967168&a))return t(a);var b="";return 0==(4294965248&a)?b=t(a>>6&31|192):0==(4294901760&a)?(g(a),b=t(a>>12&15|224),b+=h(a,6)):0==(4292870144&a)&&(b=t(a>>18&7|240),b+=h(a,12),b+=h(a,6)),b+=t(63&a|128)}function j(a){for(var b,c=e(a),d=c.length,f=-1,g="";++f<d;)b=c[f],g+=i(b);return g}function k(){if(s>=r)throw Error("Invalid byte index");var a=255&q[s];if(s++,128==(192&a))return 63&a;throw Error("Invalid continuation byte")}function l(){var a,b,c,d,e;if(s>r)throw Error("Invalid byte index");if(s==r)return!1;if(a=255&q[s],s++,0==(128&a))return a;if(192==(224&a)){var b=k();if(e=(31&a)<<6|b,e>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&a)){if(b=k(),c=k(),e=(15&a)<<12|b<<6|c,e>=2048)return g(e),e;throw Error("Invalid continuation byte")}if(240==(248&a)&&(b=k(),c=k(),d=k(),e=(15&a)<<18|b<<12|c<<6|d,e>=65536&&1114111>=e))return e;throw Error("Invalid UTF-8 detected")}function m(a){q=e(a),r=q.length,s=0;for(var b,c=[];(b=l())!==!1;)c.push(b);return f(c)}var n="object"==typeof c&&c,o="object"==typeof b&&b&&b.exports==n&&b,p="object"==typeof a&&a;(p.global===p||p.window===p)&&(d=p);var q,r,s,t=String.fromCharCode,u={version:"2.0.0",encode:j,decode:m};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return u});else if(n&&!n.nodeType)if(o)o.exports=u;else{var v={},w=v.hasOwnProperty;for(var x in u)w.call(u,x)&&(n[x]=u[x])}else d.utf8=u}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],83:[function(a,b,c){function d(a,b,c){var d;return d=b?new f(a,b):new f(a)}var e=function(){return this}(),f=e.WebSocket||e.MozWebSocket;b.exports=f?d:null,f&&(d.prototype=f.prototype)},{}]},{},[12]);